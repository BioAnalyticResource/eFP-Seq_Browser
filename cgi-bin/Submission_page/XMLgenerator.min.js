var count_clicks=1,base64="";$(function(){$("#GenerateButton").click(function(){var e=document.getElementById("reqxml").value.replace(/ /g,"_");document.getElementById("not_filled").innerHTML="";var t="",n=updatebase(n);correct_links(".sub_link"),correct_ReadMapCount(".readNumberClass"),remove_outline(".reqfield"),remove_outline(".bam_link"),remove_outline_tissue(".reqtissue"),no_null_contact(),check_filename("channelfilename"),check_inputs("inputXMLForm"),document.getElementById("reqxml").value.length>0&&document.getElementById("reqauthor").value.length>0&&check_req(".reqfield")&&check_req_tissue(".reqtissuebutton")&&check_links(".channelbamType",".bam_link")?($(".Entries").each(function(e,n){t+=update(t,n)}),$("#ResultXml").val(n+t+existingXML+end),$("#DownloadLink").attr("href","data:text/xml;base64,"+btoa(n+t+existingXML+end)).attr("download",e+".xml"),base64="data:text/xml;base64,"+btoa(unescape(encodeURIComponent(n+t+existingXML+end))),$("#generated").show()):(0==check_req(".reqfield")&&outline_req(".reqfield"),0==check_req_tissue(".reqtissuebutton")&&outline_req_tissue(".reqtissuebutton"),document.getElementById("not_filled").innerHTML+="Please fill in all red highlighted fields. ",0==check_links(".channelbamType",".bam_link")&&(outline_links(".channelbamType",".bam_link"),document.getElementById("not_filled").innerHTML+="<br> Please only use proper and valid links only. BAM Repository Links can only contain Google Drive URLs and/or Amazon AWS URLs. ")),setTimeout(()=>{$("html, body").animate({scrollTop:$(document).height()},"slow")},50)})}),$(function(){$("#CloneForm").click(CloneSection)});var end=["\t</files>"].join("\r\n"),base=['<?xml version="1.0" encoding="UTF-8"?>','\t<files xmltitle="<?channelxmltitle?>" author="<?channelauthor?>" contact="<?channelcontact?>">',"\n"].join("\r\n"),topXML=['\t\t<file info="<?channeldescription?>" record_number="<?channelrecordnumber?>" foreground="<?channelforeground?>" hex_colour="<?channelhexcolor?>" bam_type="<?channelbamType?>" name="<?channelbamlink?>" filename="<?channelfilename?>" total_reads_mapped="<?channeltotalreadsmapped?>" read_map_method="<?channelreadmapmethod?>" publication_link="<?channelpublicationlink?>" svg_subunit="<?channeltissue?>" svgname="<?channelsvgname?>" description="<?channeltitle?>" url="<?channelsralink?>" species="<?channelspecies?>" title="<?channeligbtitle?>">',"\t\t\t<controls>\n"].join("\r\n"),controlsXML=[].join("\r\n"),replicatesXML=["\t\t\t</controls>","\t\t\t<groupwith>\n"].join("\r\n"),endingXML=["\t\t\t</groupwith>","\t\t</file>","\n"].join("\r\n"),existingXML=[].join("\r\n"),all_controls="",all_replicates="";function update(e,t){for(controlsXML=[].join("\r\n"),all_controls=$(t).find(".channelcontrols").val().split(","),i=0;i<all_controls.length;i++)all_controls[i]=all_controls[i].trim(),controlsXML+="\t\t\t\t<bam_exp>"+all_controls[i]+"</bam_exp>\n";for(replicatesXML=["\t\t\t</controls>","\t\t\t<groupwith>\n"].join("\r\n"),all_replicates=$(t).find(".channelgroupwidtho").val().split(","),i=0;i<all_replicates.length;i++)all_replicates[i]=all_replicates[i].trim(),replicatesXML+="\t\t\t\t<bam_exp>"+all_replicates[i]+"</bam_exp>\n";var n={channeldescription:$(t).find(".channeldescription").val(),channelrecordnumber:$(t).find(".channelrecordnumber").val(),channelhexcolor:$(t).find(".channelhexcolor").val(),channelbamType:$(t).find(".channelbamType").val(),channelbamlink:$(t).find(".channelbamlink").val(),channeltotalreadsmapped:$(t).find(".channeltotalreadsmapped").val(),channelreadmapmethod:$(t).find(".channelreadmapmethod").val(),channelpublicationlink:$(t).find(".channelpublicationlink").val(),channeltissue:$(t).find(".channeltissue").val(),channelsvgname:$(t).find(".channelsvgname").val(),channeltitle:$(t).find(".channeltitle").val(),channelsralink:$(t).find(".channelsralink").val(),channelspecies:$(t).find(".channelspecies").val(),channelcontrols:$(t).find(".channelcontrols").val(),channelgroupwidtho:$(t).find(".channelgroupwidtho").val(),channelforeground:$(t).find(".channelforeground").val(),channelfilename:$(t).find(".channelfilename").val(),channeligbtitle:document.getElementById("reqxml").value+"/"+$(t).find(".channelrecordnumber").val()},l=topXML.replace(/<\?(\w+)\?>/g,function(e,t){return n[t]});return l+=controlsXML,l+=replicatesXML,l+=endingXML}function updatebase(e){var t={channelxmltitle:document.getElementById("reqxml").value,channelauthor:document.getElementById("reqauthor").value,channelcontact:document.getElementById("contectinfo").value};return base.replace(/<\?(\w+)\?>/g,function(e,n){return t[n]})}var tissue_sub_name="",new_tissue="",new_tissue_subunit="",new_svg="",new_hexID="";function resetLastEntryValues(){$("input[id=reqtitle]").last().val(""),$("textarea[id=reqdesc]").last().val(""),$("input[id=rec]").last().val(""),$("input[id=bam_input]").last().val(""),$("input[id=publink]").last().val(""),$("input[id=sralink]").last().val(""),$("input[id=reqread]").last().val(""),$("input[id=readmapmethod]").last().val(""),$("button[id="+new_tissue+"]").html("Tissue select"),$("input[id="+new_tissue_subunit+"]").last().val(""),$("input[id="+new_hexID+"]").last().val(""),$("input[id=controls]").last().val(""),$("input[id=replicate_controls1]").last().val(""),$("input[id="+new_svg+"]").last().html(""),$("input[id=filename]").last().val("")}function CloneSection(){count_clicks=document.getElementsByClassName("channeltitle").length;var e=document.getElementsByClassName("tissueInput")[document.getElementsByClassName("tissueInput").length-1].value;document.getElementsByClassName("tissueInput")[document.getElementsByClassName("tissueInput").length-1].value="",updateTable(document.getElementsByClassName("tissueInput")[document.getElementsByClassName("tissueInput").length-1].id),$(".SubmissionArea").append($(".Entries:first").clone(!0)),document.getElementsByClassName("tissueInput")[document.getElementsByClassName("tissueInput").length-2].value=e,new_tissue="tissue"+(count_clicks+1),new_tissue_subunit="tissue"+(count_clicks+1)+"_subunit",new_tissue_select="tissue"+(count_clicks+1)+"_select",new_svg="svg"+(count_clicks+1),new_hexID="hexID_num"+(count_clicks+1),new_foregroundID="foregroundID_num"+(count_clicks+1),tissueInput="tissueInput"+(count_clicks+1),$("legend:last").text("Entry "+(count_clicks+1)),$(".change_div_id").last().attr("name",new_tissue),$(".change_button_id").last().attr("id",new_tissue),$(".change_id_tissue_subunit").last().attr("name",new_tissue_subunit),$(".change_id_tissue_subunit").last().attr("id",new_tissue_subunit),$(".change_id_tissue").last().attr("id",new_tissue),$(".change_tissue_select").last().attr("id",new_tissue_select),$(".change_svg").last().attr("id",new_svg),$(".change_foregroundcolor").last().attr("id",new_foregroundID),$(".change_hexcolor").last().attr("id",new_hexID),$(".tissueInput").last().attr("id",tissueInput),$(".tissue_table").last().attr("id","tissueTable_"+tissueInput),count_clicks=document.getElementsByClassName("channeltitle").length,resetLastEntryValues()}function DeleteSection(){$("div[id=entries]").length>1&&($("div[id=entries]").last().remove(),count_clicks=document.getElementsByClassName("channeltitle").length)}function resetForm(){for(CloneSection();1!=$("div[id=entries]").length;)$("div[id=entries]").last().remove();resetLastEntryValues(),hideWarning(),$("#araport11XML").empty(),$("#klepikovaXML").empty(),display_add_button(!1),count_clicks=document.getElementsByClassName("channeltitle").length}function correct_links(e){var t,n=document.getElementById("Entries_all").querySelectorAll(e);for(t=0;t<n.length;t++)n[t].value.length>0&&(n[t].value=n[t].value.trim(),0==("http://"==n[t].value.substring(0,7)||"https://"==n[t].value.substring(0,8))&&(n[t].value="https://"+n[t].value),"bam_input"==n[t].id&&"?usp=sharing"==n[t].value.substr(n[t].value.length-"?usp=sharing".length)&&(n[t].value=n[t].value.split("?usp=sharing")[0]))}var tissue_doc,tissue_sub_parse_remove,read_num="";function correct_ReadMapCount(e){var t,n=document.getElementById("Entries_all").querySelectorAll(e);for(t=0;t<n.length;t++)n[t].value=n[t].value.trim(),void 0===n[t].value&&(n[t].value=0),n[t].value=only_ReadNum(n[t].value)}function only_ReadNum(e){var t;for(read_num="",t=0;t<e.length;t++)0==isNaN(e[t])&&(read_num+=e[t]);return e=read_num,e=Math.round(e)}function check_links(e,t){document.getElementById("Entries_all").querySelectorAll(t).length;var n,l=document.getElementById("Entries_all").querySelectorAll(t),a=document.getElementById("Entries_all").querySelectorAll(e);for(n=0;n<l.length;n++)if(l[n].id="bam_input"){if(l[n].value.length>0){if("Google Drive"==a[n].value){var i=l[n].value.split("//");if(i.length>1){var o=i[1];return"drive.google.com"===o.split("/")[0]||"www.drive.google.com"===o.split("/")[0]}return 0===i.length&&("drive.google.com"===i.split("/")[0]||"www.drive.google.com"===i.split("/")[0])}if("Amazon AWS"==a[n].value){let e=new URL(l[n].value);return 1==((e.host("s3.amazonaws.com")||l[n].value.includes("araport.cyverse-cdn.tacc.cloud"))&&1==check_amazon_for_bam(l[n].value))||((e.host("s3.amazonaws.com")||l[n].value.includes("araport.cyverse-cdn.tacc.cloud/"))&&check_amazon_for_bam(l[n].value),!1)}return!1}return!1}}function check_filename(e){var t=document.getElementsByClassName(e);for(i=0;i<t.length;i++){var n=t[i].value.trim().length;"."==t[i].value[n-1]&&(t[i].value=t[i].value.substring(0,n-1)),0==t[i].value.trim().endsWith(".bam")?(cacheValue=t[i].value.trim(),cacheValue+=".bam",t[i].value=cacheValue):1==t[i].value.trim().endsWith(".bam")&&(t[i].value=t[i].value.trim())}}function check_req(e){var t,n=0,l=document.getElementById("Entries_all").querySelectorAll(e).length,a=document.getElementById("Entries_all").querySelectorAll(e);for(t=0;t<a.length;t++)a[t].value.length>0&&(a[t].value=a[t].value.trim(),n+=1);return n==l}function check_inputs(e){var t=document.getElementsByClassName(e);for(i=0;i<t.length;i++)if(t[i].value.length>0&&(t[i].value=t[i].value.trim(),1==t[i].value.includes('"'))){var n=t[i].value.replace(/["]/g,"'");t[i].value=n}}function check_req_tissue(e){document.getElementById("Entries_all").querySelectorAll(e).length,document.getElementById("Entries_all").querySelectorAll(e);var t,n=0;for(t=1;t<=count_clicks;t++){var l="tissue"+t+"_subunit";document.getElementById(l).value.length>0&&(n+=1)}return n==count_clicks}function outline_req(e){document.getElementById("Entries_all").querySelectorAll(e).length;var t,n=document.getElementById("Entries_all").querySelectorAll(e);for(t=0;t<n.length;t++)n[t].value.length<=0&&(n[t].style.borderColor="#ff2626",n[t].style.boxShadow="0 0 10px #ff2626")}function outline_req_tissue(e){document.getElementById("Entries_all").querySelectorAll(e).length;var t,n=document.getElementById("Entries_all").querySelectorAll(e);for(t=0;t<n.length;t++){var l="tissue"+(t+1)+"_subunit";document.getElementById(l).value.length<=0&&(n[t].style.borderColor="#ff2626",n[t].style.boxShadow="0 0 10px #ff2626")}}function outline_links(e,t){var n,l=document.getElementById("Entries_all").querySelectorAll(t).length,a=document.getElementById("Entries_all").querySelectorAll(t),i=document.getElementById("Entries_all").querySelectorAll(e);for(n=0;n<l;n++)if("bam_input"===a[n].id)if(a[n].value.length>0){let e,t;i[n]&&i[n].value&&(e=i[n].value.trim());try{t=new URL(a[n].value)}catch{console.error("Unreadable URL presented: ",a[n].value)}e&&t?"Amazon AWS"===e?check_amazon_for_bam(a[n].value)&&["s3.amazonaws.com","araport.cyverse-cdn.tacc.cloud"].includes(t[host])?(a[n].style.borderColor=null,a[n].style.boxShadow=null):(a[n].style.borderColor="#ff2626",a[n].style.boxShadow="0 0 10px #ff2626"):"Google Drive"===e&&["drive.google.com"].includes(t[host])?(a[n].style.borderColor=null,a[n].style.boxShadow=null):(a[n].style.borderColor="#ff2626",a[n].style.boxShadow="0 0 10px #ff2626"):(a[n].style.borderColor="#ff2626",a[n].style.boxShadow="0 0 10px #ff2626")}else a[n].style.borderColor="#ff2626",a[n].style.boxShadow="0 0 10px #ff2626"}function check_amazon_for_bam(e){return".bam"==e.slice(-4)}function remove_outline(e){document.getElementById("not_filled").innerHTML="";var t,n=document.getElementById("Entries_all").querySelectorAll(e);for(t=0;t<n.length;t++)n[t].value.length>0&&(n[t].style.borderColor=null,n[t].style.boxShadow=null)}function remove_outline_tissue(e){document.getElementById("not_filled").innerHTML="";var t,n=document.getElementById("Entries_all").querySelectorAll(e);for(t=0;t<n.length;t++)tissue_doc="tissue"+(t+1),tissue_sub_parse_remove="tissue"+(t+1)+"_subunit",document.getElementById(tissue_sub_parse_remove).value.length>0&&(document.getElementById(tissue_doc).style.borderColor=null,document.getElementById(tissue_doc).style.boxShadow=null)}function no_null_contact(){null==document.getElementById("contectinfo")&&(document.getElementById("contectinfo").innerHTML=" ")}var tissue_click="";function designateTissueClick(e){e&&e.includes("tissue")&&(tissue_click=e)}var which_svg="",tissue_subunit="",clicked_id="";function clickclick(e){if(document.getElementById(tissue_click)&&document.getElementById(tissue_click).innerHTML){document.getElementById(tissue_click).innerHTML=e.replace(/_/g," "),tissue_subunit=tissue_click+"_subunit",clicked_id=e,tissue_sub_name=document.getElementById(e).className.split(" ")[1],document.getElementById(tissue_subunit).value=tissue_sub_name;var t=tissue_click.match(/\d/g).join("");which_svg="svg"+t,which_hex="hexID_num"+t,which_foreground="foregroundID_num"+t,document.getElementById(which_svg).value=determine_svgname(e),document.getElementById(which_hex).value=determine_hexcode(determine_svgname(e),e),document.getElementById(which_foreground).value=determine_foreground(determine_hexcode(determine_svgname(e),e))}}function determine_svgname(e){return"10_Day_old_Seedling"==e||"10_Day_old_Seedling_roots"==e||"10_Day_old_Seedling_shoots"==e||"ath-10dayOldSeedling.svg"==e?"ath-10dayOldSeedling.svg":"15_Day_old_Seedling"==e||"15_Day_old_Seedling_roots"==e||"15_Day_old_Seedling_shoots"==e||"ath-15dayOldSeedling.svg"==e?"ath-15dayOldSeedling.svg":"Etiolated_seedling"==e||"ath-etiolatedSeedling.svg"==e?"ath-etiolatedSeedling.svg":"Flower"==e||"Flower_receptacle"==e||"ath-Flower.svg"==e?"ath-Flower.svg":"Carpel_petals_stamen_and_sepals"==e||"Flowers_petals"==e||"Flowers_stamen"==e||"Flowers_sepals"==e||"Flowers_carpel"==e||"ath-FlowerParts.svg"==e?"ath-FlowerParts.svg":"Germinating_seed"==e||"ath-GerminatingSeed.svg"==e?"ath-GerminatingSeed.svg":"Internode"==e||"ath-Internode.svg"==e?"ath-Internode.svg":"leaf"==e||"ath-leaf.svg"==e?"ath-leaf.svg":"Full_leaf"==e||"Leaf_lamina"==e||"Leaf_veins"==e||"Leaf_petiole"==e||"ath-LeafParts.svg"==e?"ath-LeafParts.svg":"Pollen"==e||"ath-Pollen.svg"==e?"ath-Pollen.svg":"Roots_tip"==e||"ath-RootTip.svg"==e?"ath-RootTip.svg":"Rosette_shoot"==e||"Rosette_Plus_Root"==e||"Rosette_root"==e||"ath-rosettePlusRoot.svg"==e?"ath-rosettePlusRoot.svg":"Seed_1-4"==e||"ath-Seed1-4.svg"==e?"ath-Seed1-4.svg":"Seed_5-7"==e||"ath-Seed5-7.svg"==e?"ath-Seed5-7.svg":"Seed_8+"==e||"ath-Seed8+.svg"==e?"ath-Seed8+.svg":"Senescent_Leaf"==e||"ath-SenescentLeaf.svg"==e?"ath-SenescentLeaf.svg":"Shoot_Apex_Inflorescense"==e||"ath-ShootApexInflorescense.svg"==e?"ath-ShootApexInflorescense.svg":"Shoot_Apex_Vegetative-Transition"==e||"ath-ShootApexVegetative-Transition.svg"==e?"ath-ShootApexVegetative-Transition.svg":"Silique_1-5"==e||"ath-Silique1-5.svg"==e?"ath-Silique1-5.svg":"Silique_6-10"==e||"ath-Silique6-10.svg"==e?"ath-Silique6-10.svg":"Young_Leaf_1-4_Leaf"==e||"ath-YoungLeaf1-4.svg"==e?"ath-YoungLeaf1-4.svg":"Early_Budding_Flower"==e||"Early_Budding_Flower_shoot"==e||"Early_Budding_Flower_buds"==e||"ath-EarlyBuddingFlower.svg"==e?"ath-EarlyBuddingFlower.svg":"Flower_Bud"==e||"ath-FlowerBud.svg"==e?"ath-FlowerBud.svg":"Stamen"==e||"Stamen_anthers"==e||"Stamen_filament"==e||"ath-Stamen.svg"==e?"ath-Stamen.svg":"Stigma_and_Ovaries"==e||"Stigma"==e||"Ovaries"==e||"ath-StigmaAndOvaries.svg"==e?"ath-StigmaAndOvaries.svg":"Whole_Silique"==e||"Whole_Silique_silique"==e||"Whole_Silique_seed"==e||"ath-WholeSilique.svg"==e?"ath-WholeSilique.svg":"young_Seedling"==e||"young_Seedling_root"==e||"young_Seedling_hypocotyl"==e||"young_Seedling_cotyledon"==e||"ath-youngSeedling.svg"==e?"ath-youngSeedling.svg":"Flower_Development_1"==e||"flowerDevelopmentPart1"==e||"ath-FlowerDevelopment1.svg"==e?"ath-FlowerDevelopment1.svg":"Flower_Development_2"==e||"flowerDevelopmentPart2"==e||"ath-FlowerDevelopment2.svg"==e?"ath-FlowerDevelopment2.svg":"Flower_Development_3"==e||"flowerDevelopmentPart3"==e||"ath-FlowerDevelopment3.svg"==e?"ath-FlowerDevelopment3.svg":"Flower_Development_4"==e||"flowerDevelopmentPart4"==e||"ath-FlowerDevelopment4.svg"==e?"ath-FlowerDevelopment4.svg":"Flower_Development_5"==e||"flowerDevelopmentPart5"==e||"ath-FlowerDevelopment5.svg"==e?"ath-FlowerDevelopment5.svg":"Flower_Development_6-8"==e||"flowerDevelopmentPart6"==e||"ath-FlowerDevelopment6-8.svg"==e?"ath-FlowerDevelopment6-8.svg":"Flower_Development_9-11"==e||"flowerDevelopmentPart9"==e||"ath-FlowerDevelopment9-11.svg"==e?"ath-FlowerDevelopment9-11.svg":"Flower_Development_12-14"==e||"flowerDevelopmentPart12"==e||"ath-FlowerDevelopment12-14.svg"==e?"ath-FlowerDevelopment12-14.svg":"Other"==e||"ath-Other.svg"==e?"ath-Other.svg":void 0}function determine_hexcode(e,t){return"ath-10dayOldSeedling.svg"==e&&"10_Day_old_Seedling_shoots"==t?"0x989800":"ath-10dayOldSeedling.svg"==e&&"10_Day_old_Seedling"==t?"0x98FF00":"ath-10dayOldSeedling.svg"==e&&"10_Day_old_Seedling_roots"==t?"0xCCCC97":"ath-15dayOldSeedling.svg"==e&&"15_Day_old_Seedling_roots"==t?"0xbd7740":"ath-15dayOldSeedling.svg"==e?"0xbd7740":"ath-etiolatedSeedling.svg"==e?"0xCCCC97":"ath-Flower.svg"==e&&"Flower_receptacle"==t?"0xcaff00":"ath-Flower.svg"==e&&"Flower"==t?"0xCCCC97":"ath-Flower.svg"==e?"0xCCFF00":"ath-FlowerParts.svg"==e&&"Flowers_carpel"==t?"0xe7ff65":"ath-FlowerParts.svg"==e&&"Flowers_petals"==t?"0xcbcb32":"ath-FlowerParts.svg"==e&&"Flowers_sepals"==t?"0xcaff00":"ath-FlowerParts.svg"==e?"0xcbcb32":"ath-GerminatingSeed.svg"==e?"0xf77700":"ath-Internode.svg"==e?"0x99ccff":"ath-leaf.svg"==e?"0x64CC65":"ath-LeafParts.svg"==e&&"Leaf_lamina"==t?"0x65cc66":"ath-LeafParts.svg"==e&&"Leaf_petiole"==t?"0x00cbff":"ath-LeafParts.svg"==e&&"Leaf_veins"==t?"0x007eff":"ath-LeafParts.svg"==e?"0x65cc66":"ath-Pollen.svg"==e?"0xFF0000":"ath-RootTip.svg"==e?"0xBD7740":"ath-rosettePlusRoot.svg"==e?"0x64cc65":"ath-Seed1-4.svg"==e?"0xfe9900":"ath-Seed5-7.svg"==e?"0xfecc00":"ath-Seed8+.svg"==e?"0xf77700":"ath-SenescentLeaf.svg"==e?"0x64cc65":"ath-ShootApexInflorescense.svg"==e?"0x979999":"ath-ShootApexVegetative-Transition.svg"==e?"0x64cc65":"ath-Silique1-5.svg"==e?"0x937326":"ath-Silique6-10.svg"==e?"0x818211":"ath-YoungLeaf1-4.svg"==e?"0x64cc65":"ath-EarlyBuddingFlower.svg"==e?"0xffff66":"ath-FlowerBud.svg"==e?"0xFFFF65":"ath-Stamen.svg"==e&&"Stamen_anthers"==t?"0xff5d5d":"ath-Stamen.svg"==e&&"Stamen_filament"==t?"0xcaff00":"ath-Stamen.svg"==e?"0xff5d5d":"ath-StigmaAndOvaries.svg"==e&&"Ovaries"==t?"0xccff65":"ath-StigmaAndOvaries.svg"==e&&"Stigma"==t?"0xcaff00":"ath-WholeSilique.svg"==e&&"Whole_Silique_silique"==t?"0xb2b42a":"ath-WholeSilique.svg"==e?"0x929326":"ath-youngSeedling.svg"==e&&"young_Seedling_cotyledon"==t?"0x99ff00":"ath-youngSeedling.svg"==e&&"young_Seedling_hypocotyl"==t?"0xcccc98":"ath-youngSeedling.svg"==e&&"young_Seedling_root"==t?"0xc38c60":"ath-youngSeedling.svg"==e?"0x99ff00":"ath-FlowerDevelopment1.svg"==e?"0xe8e846":"ath-FlowerDevelopment2.svg"==e?"0xe8e846":"ath-FlowerDevelopment3.svg"==e?"0xd3d332":"ath-FlowerDevelopment4.svg"==e?"0xd3d332":"ath-FlowerDevelopment5.svg"==e?"0xe8e846":"ath-FlowerDevelopment6.svg"==e?"0xe8e846":"ath-FlowerDevelopment9.svg"==e?"0xe8e846":"ath-FlowerDevelopment12.svg"==e?"0xe8e846":"ath-FlowerDevelopment15.svg"==e?"0xffff66":"ath-FlowerDevelopment19.svg"==e?"0xffff66":"ath-Other.svg"==e?"0x64cc65":void 0}function determine_foreground(e){if(e&&e.length>2&&e.length<9)return e.substring(2).toUpperCase();console.log("Error retrieving foreground hexcode on the following hexcode: "+e)}function convert_to_json(){document.getElementById("dataInput").value=document.getElementById("dataInput").value.trim(),document.getElementById("closeExcel_modal").click();let e=[],t=document.getElementById("dataInput").value.trim().split("\n"),n=["title","description","record number","rna-seq data/bam file repository link","repository type","bam filename","publication link","sra/ncbi link","total reads mapped","read map method","species","tissue","tissue subunit","controls","replicate controls"];for(let l in t)if(t[l].split("\t")[0]){let a=t[l].split("\t");if(0==l&&"Title*"===a[0].trim())continue;{let t={};for(let e in a)n[e]&&(t[n[e]]=a[e].trim());e.push(t)}}resetForm();for(let t in e){t>0&&CloneSection(),$("select[id=bamType]").last().val(e[t]["repository type"]),$("input[id=reqtitle]").last().val(e[t].title),$("textarea[id=reqdesc]").last().val(e[t].description),$("input[id=rec]").last().val(e[t]["record number"]),$("input[id=bam_input]").last().val(e[t]["rna-seq data/bam file repository link"]),$("input[id=filename]").last().val(e[t]["bam filename"]),$("input[id=publink]").last().val(e[t]["publication link"]),$("input[id=sralink]").last().val(e[t]["sra/ncbi link"]),$("input[id=reqread]").last().val(e[t]["total reads mapped"]),$("input[id=readmapmethod]").last().val(e[t]["read map method"]),$("select[id=reqspecies]").last().val(e[t].species);var l="svg"+(parseInt(t)+1);$("input[id="+l+"]").last().val(determine_svgname(e[t].tissue));var a="tissue"+(parseInt(t)+1);$("button[id="+a+"]").last().html(e[t].tissue.split("_").join(" ")),console.log(a,e[t].tissue);var i="tissue"+(parseInt(t)+1)+"_subunit";$("input[id="+i+"]").last().val(e[t]["tissue subunit"]);var o="hexID_num"+(parseInt(t)+1),s=determine_hexcode(determine_svgname(e[t].tissue),e[t]["tissue subunit*"]);$("input[id="+o+"]").last().val(s.toString());var r="foregroundID_num"+(parseInt(t)+1);$("input[id="+r+"]").last().val(determine_foreground(s)),$("input[id=controls]").last().val(e[t].controls),$("input[id=replicate_controls1]").last().val(e[t]["replicate controls"])}}var warningActive="nope";function showWarning(){"nope"==warningActive?(document.getElementById("warning").className="warning",warningActive="yes"):"yes"==warningActive&&hideWarning()}function hideWarning(){document.getElementById("warning").className="warning_nope",warningActive="nope"}function update_accountAdd_options(){if(""!=parent.users_email&&parent.title_list.length>0)for(document.getElementById("account_dataDisplay").removeAttribute("style"),i=0;i<parent.title_list.length;i++){var e="'"+parent.title_list[i]+"'";$("#existingDropdown_menu").append('<li style="padding-left: 3px;" onclick="openDataset(event, '+e+'); display_add_button(true); display_or = true;">'+parent.title_list[i]+"</li>"),$("#privateDatasets").append('<div id="'+parent.title_list[i]+'" class="tabcontent"><h3>'+parent.title_list[i]+'</h3><div id="'+parent.title_list[i]+'_xml"></div></div>')}else document.getElementById("account_dataDisplay").style.display="none"}function update_existingAdd_options(){display_add_button(display_or),parent.get_user_XML_display(),update_accountAdd_options();var e=new XMLHttpRequest;e.open("GET","cgi-bin/data/bamdata_araport11.xml",!0),e.responseType="document",e.send(),setTimeout(function(){retrieveSRR_existing(e,"araport11XML")},1e3);var t=new XMLHttpRequest;t.open("GET","cgi-bin/data/bamdata_Developmental_transcriptome.xml",!0),t.responseType="document",t.send(),setTimeout(function(){retrieveSRR_existing(t,"klepikovaXML")},1e3)}var display_or=!1;function display_add_button(e){1==e?document.getElementById("addToData").removeAttribute("style"):0==e&&(document.getElementById("addToData").style.display="none")}function retrieveCONTENT_existing(e,t){var n,l;for(n=e.responseXML.getElementsByTagName("file"),l=0;l<n.length;l++)n[l].getAttribute("record_number")==t&&(console.log(n[l]),existingXML+="\t\t",existingXML+=n[l].outerHTML,existingXML+="\n")}function addPublic_toExisting(){existingXML=[].join("\r\n");var e=document.getElementById("araport11XML").childElementCount/2;for(i=0;i<e;i++){var t="addBox"+i;if(1==document.getElementById(t).checked){var n=new XMLHttpRequest;n.open("GET","cgi-bin/data/bamdata_araport11.xml",!0),n.responseType="document",n.send(),setTimeout(function(){retrieveCONTENT_existing(n,document.getElementById(t).value)},1e3)}}var l=document.getElementById("klepikovaXML").childElementCount/2;for(i=0;i<l;i++){t="addBox"+i;if(1==document.getElementById(t).checked){var a=new XMLHttpRequest;a.open("GET","cgi-bin/data/bamdata_Developmental_transcriptome.xml",!0),a.responseType="document",a.send(),setTimeout(function(){retrieveCONTENT_existing(a,document.getElementById(t).value)},1e3)}}}function openDataset(e,t){var n,l,a;for(l=document.getElementsByClassName("tabcontent"),n=0;n<l.length;n++)l[n].style.display="none";for(a=document.getElementsByClassName("tablinks"),n=0;n<a.length;n++)a[n].className=a[n].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}function changeWidthConverter(){document.getElementById("converter")&&document.getElementById("dataInput")&&(document.getElementById("converter").style.width="100%",document.getElementById("dataInput").style.width="100%")}function updateTable(e){var t,n,l,a;for(t=document.getElementById(e).value.toLowerCase(),n=document.getElementById("tissueTable_"+e),th=n.getElementsByTagName("td"),a=0;a<th.length;a++)(l=th[a])&&(l.innerHTML.toLowerCase().indexOf(t)>-1?th[a].style.display="":th[a].style.display="none")}function bamType_placeholder(){"Google Drive"==document.getElementById("bamType").value?$("#bam_input").attr("placeholder",'Please input a Shared View link WITHOUT the "?usp=sharing." at the end'):"Amazon AWS"==document.getElementById("bamType").value&&$("#bam_input").attr("placeholder","Please input the link end with the file like /name.bam")}function toggleTissueSelection(e){document.getElementById(e+"_select").classList.value.includes("show")?document.getElementById(e+"_select").classList.remove("show"):document.getElementById(e+"_select").classList.add("show")}function initGen(){changeWidthConverter()}setTimeout(function(){initGen()},1e3);