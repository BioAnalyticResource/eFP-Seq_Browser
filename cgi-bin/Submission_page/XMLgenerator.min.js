let count_clicks=1,base64="";$((function(){$("#GenerateButton").click((function(){const file_name=document.getElementById("reqxml").value.replace(/ /g,"_");document.getElementById("not_filled").innerHTML="";let formatXML="";const filledbase=updateBase();correct_links(".sub_link"),correct_ReadMapCount(".readNumberClass"),remove_outline(".reqfield"),remove_outline(".bam_link"),remove_outline_tissue(".reqtissue"),no_null_contact(),check_filename("channelfilename"),check_inputs("inputXMLForm"),document.getElementById("reqxml").value.length>0&&document.getElementById("reqauthor").value.length>0&&check_req(".reqfield")&&check_req_tissue()&&check_links(".channelbamType",".bam_link")?($(".Entries").each((function(_i,v){formatXML+=update(formatXML,v)})),$("#ResultXml").val(filledbase+formatXML+existingXML+end),$("#DownloadLink").attr("href",`data:text/xml;base64,${btoa(filledbase+formatXML+existingXML+end)}`).attr("download",file_name+".xml"),base64=`data:text/xml;base64,${btoa(decodeURIComponent(encodeURIComponent(filledbase+formatXML+existingXML+end)))}`,$("#generated").show()):(check_req(".reqfield")||outline_req(".reqfield"),check_req_tissue()||outline_req_tissue(".reqtissuebutton"),document.getElementById("not_filled").innerHTML+="Please fill in all red highlighted fields. ",check_links(".channelbamType",".bam_link")||(outline_links(".channelbamType",".bam_link"),document.getElementById("not_filled").innerHTML+="<br> Please only use proper and valid links only. BAM Repository Links can only contain Google Drive URLs and/or Amazon AWS URLs. ")),setTimeout((()=>{$("html, body").animate({scrollTop:$(document).height()},"slow")}),50)}))})),$((function(){$("#CloneForm").click(CloneSection)}));const end=["\t</files>"].join("\r\n"),base=['<?xml version="1.0" encoding="UTF-8"?>','\t<files xmltitle="<?channelxmltitle?>" author="<?channelauthor?>" contact="<?channelcontact?>">',"\n"].join("\r\n"),topXML=['\t\t<file info="<?channeldescription?>" record_number="<?channelrecordnumber?>" foreground="<?channelforeground?>" hex_colour="<?channelhexcolor?>" bam_type="<?channelbamType?>" name="<?channelbamlink?>" filename="<?channelfilename?>" total_reads_mapped="<?channeltotalreadsmapped?>" read_map_method="<?channelreadmapmethod?>" publication_link="<?channelpublicationlink?>" svg_subunit="<?channeltissue?>" svgname="<?channelsvgname?>" description="<?channeltitle?>" url="<?channelsralink?>" species="<?channelspecies?>" title="<?channeligbtitle?>">',"\t\t\t<controls>\n"].join("\r\n");let controlsXML=[].join("\r\n"),replicatesXML=["\t\t\t</controls>","\t\t\t<groupwith>\n"].join("\r\n");const endingXML=["\t\t\t</groupwith>","\t\t</file>","\n"].join("\r\n");let existingXML=[].join("\r\n"),all_controls="",all_replicates="";function update(_formatXML,v){controlsXML=[].join("\r\n"),all_controls=$(v).find(".channelcontrols").val().split(",");for(let i=0;i<all_controls.length;i++)all_controls[i]=all_controls[i].trim(),controlsXML+=`\t\t\t\t<bam_exp>${all_controls[i]}</bam_exp>\n`;replicatesXML=["\t\t\t</controls>","\t\t\t<groupwith>\n"].join("\r\n"),all_replicates=$(v).find(".channelgroupwidtho").val().split(",");for(let i=0;i<all_replicates.length;i++)all_replicates[i]=all_replicates[i].trim(),replicatesXML+=`\t\t\t\t<bam_exp>${all_replicates[i]}</bam_exp>\n`;const variables={channeldescription:$(v).find(".channeldescription").val(),channelrecordnumber:$(v).find(".channelrecordnumber").val(),channelhexcolor:$(v).find(".channelhexcolor").val(),channelbamType:$(v).find(".channelbamType").val(),channelbamlink:$(v).find(".channelbamlink").val(),channeltotalreadsmapped:$(v).find(".channeltotalreadsmapped").val(),channelreadmapmethod:$(v).find(".channelreadmapmethod").val(),channelpublicationlink:$(v).find(".channelpublicationlink").val(),channeltissue:$(v).find(".channeltissue").val(),channelsvgname:$(v).find(".channelsvgname").val(),channeltitle:$(v).find(".channeltitle").val(),channelsralink:$(v).find(".channelsralink").val(),channelspecies:$(v).find(".channelspecies").val(),channelcontrols:$(v).find(".channelcontrols").val(),channelgroupwidtho:$(v).find(".channelgroupwidtho").val(),channelforeground:$(v).find(".channelforeground").val(),channelfilename:$(v).find(".channelfilename").val(),channeligbtitle:document.getElementById("reqxml").value+"/"+$(v).find(".channelrecordnumber").val()};let fillXML=topXML.replace(/<\?(\w+)\?>/g,(function(_match,name){return variables[name]}));return fillXML+=controlsXML,fillXML+=replicatesXML,fillXML+=endingXML,fillXML}function updateBase(){const variables={channelxmltitle:document.getElementById("reqxml").value,channelauthor:document.getElementById("reqauthor").value,channelcontact:document.getElementById("contectinfo").value};return base.replace(/<\?(\w+)\?>/g,(function(_match,name){return variables[name]}))}let tissue_sub_name="",new_tissue="",new_tissue_subunit="",new_svg="",new_hexID="";function resetLastEntryValues(){$("input[id=reqtitle]").last().val(""),$("textarea[id=reqdesc]").last().val(""),$("input[id=rec]").last().val(""),$("input[id=bam_input]").last().val(""),$("input[id=publink]").last().val(""),$("input[id=sralink]").last().val(""),$("input[id=reqread]").last().val(""),$("input[id=readmapmethod]").last().val(""),$("button[id="+new_tissue+"]").html("Tissue select"),$("input[id="+new_tissue_subunit+"]").last().val(""),$("input[id="+new_hexID+"]").last().val(""),$("input[id=controls]").last().val(""),$("input[id=replicate_controls1]").last().val(""),$("input[id="+new_svg+"]").last().html(""),$("input[id=filename]").last().val("")}function CloneSection(){count_clicks=document.getElementsByClassName("channeltitle").length;const cacheQuery=document.getElementsByClassName("tissueInput")[document.getElementsByClassName("tissueInput").length-1].value;document.getElementsByClassName("tissueInput")[document.getElementsByClassName("tissueInput").length-1].value="",updateTable(document.getElementsByClassName("tissueInput")[document.getElementsByClassName("tissueInput").length-1].id),$(".SubmissionArea").append($(".Entries:first").clone(!0)),document.getElementsByClassName("tissueInput")[document.getElementsByClassName("tissueInput").length-2].value=cacheQuery,new_tissue="tissue"+(count_clicks+1),new_tissue_subunit="tissue"+(count_clicks+1)+"_subunit";const new_tissue_select="tissue"+(count_clicks+1)+"_select";new_svg="svg"+(count_clicks+1),new_hexID="hexID_num"+(count_clicks+1);const new_foregroundID="foregroundID_num"+(count_clicks+1),tissueInput="tissueInput"+(count_clicks+1);$("legend:last").text("Entry "+(count_clicks+1)),$(".change_div_id").last().attr("name",new_tissue),$(".change_button_id").last().attr("id",new_tissue),$(".change_id_tissue_subunit").last().attr("name",new_tissue_subunit),$(".change_id_tissue_subunit").last().attr("id",new_tissue_subunit),$(".change_id_tissue").last().attr("id",new_tissue),$(".change_tissue_select").last().attr("id",new_tissue_select),$(".change_svg").last().attr("id",new_svg),$(".change_foregroundcolor").last().attr("id",new_foregroundID),$(".change_hexcolor").last().attr("id",new_hexID),$(".tissueInput").last().attr("id",tissueInput),$(".tissue_table").last().attr("id","tissueTable_"+tissueInput),count_clicks=document.getElementsByClassName("channeltitle").length,resetLastEntryValues()}function DeleteSection(){$("div[id=entries]").length>1&&($("div[id=entries]").last().remove(),count_clicks=document.getElementsByClassName("channeltitle").length)}function resetForm(){for(CloneSection();1!=$("div[id=entries]").length;)$("div[id=entries]").last().remove();resetLastEntryValues(),hideWarning(),$("#araport11XML").empty(),$("#klepikovaXML").empty(),display_add_button(!1),count_clicks=document.getElementsByClassName("channeltitle").length}function correct_links(class_name){const x=document.getElementById("Entries_all").querySelectorAll(class_name);for(const element of x)element.value.length>0&&(element.value=element.value.trim(),"http://"!=element.value.substring(0,7)&&"https://"===element.value.substring(0,8)||(element.value="https://"+element.value),"bam_input"==element.id&&"?usp=sharing"==element.value.substr(element.value.length-12)&&(element.value=element.value.split("?usp=sharing")[0]))}let tissue_doc,tissue_sub_parse_remove,read_num="";function correct_ReadMapCount(class_name){const x=document.getElementById("Entries_all").querySelectorAll(class_name);for(const element of x)element.value=element.value.trim(),void 0===element.value&&(element.value=0),element.value=only_ReadNum(element.value)}function only_ReadNum(input_string){let u;for(read_num="",u=0;u<input_string.length;u++)isNaN(input_string[u])||(read_num+=input_string[u]);return input_string=read_num,input_string=Math.round(input_string)}function check_links(bam_name,repo_name){const x=document.getElementById("Entries_all").querySelectorAll(repo_name),bam_x=document.getElementById("Entries_all").querySelectorAll(bam_name);for(let i=0;i<x.length;i++)if("bam_input"===x[i].id){if(x[i].value.length>0){if("Google Drive"==bam_x[i].value){const driveLink=x[i].value.split("//");if(driveLink.length>1){const driveURL=driveLink[1];return"drive.google.com"===driveURL.split("/")[0]||"www.drive.google.com"===driveURL.split("/")[0]}return 0===driveLink.length&&("drive.google.com"===driveLink.split("/")[0]||"www.drive.google.com"===driveLink.split("/")[0])}if("Amazon AWS"==bam_x[i].value){const urlString=new URL(x[i].value);return!(!urlString.host("s3.amazonaws.com")&&!x[i].value.includes("araport.cyverse-cdn.tacc.cloud")||!check_amazon_for_bam(x[i].value))||((urlString.host("s3.amazonaws.com")||x[i].value.includes("araport.cyverse-cdn.tacc.cloud/"))&&check_amazon_for_bam(x[i].value),!1)}return!1}return!1}}function check_filename(classname){const filenameDoc=document.getElementsByClassName(classname);for(const doc of filenameDoc){const filenameDocLength=doc.value.trim().length;if("."==doc.value[filenameDocLength-1]&&(doc.value=doc.value.substring(0,filenameDocLength-1)),doc.value.trim().endsWith(".bam"))doc.value.trim().endsWith(".bam")&&(doc.value=doc.value.trim());else{let cacheValue=doc.value.trim();cacheValue+=".bam",doc.value=cacheValue}}}function check_req(class_name){let filled=0;const match=document.getElementById("Entries_all").querySelectorAll(class_name).length,x=document.getElementById("Entries_all").querySelectorAll(class_name);for(const element of x)element.value.length>0&&(element.value=element.value.trim(),filled+=1);return filled==match}function check_inputs(class_name){const inputDoc=document.getElementsByClassName(class_name);for(const element of inputDoc)if(element.value.length>0&&(element.value=element.value.trim(),element.value.includes('"'))){let temp=element.value.replace(/["]/g,"'");element.value=temp}}function check_req_tissue(){let sub_filled=0;for(let i=1;i<=count_clicks;i++){const tissue_sub_parse="tissue"+i+"_subunit";document.getElementById(tissue_sub_parse).value.length>0&&(sub_filled+=1)}return sub_filled==count_clicks}function outline_req(class_name){const x=document.getElementById("Entries_all").querySelectorAll(class_name);for(const element of x)element.value.length<=0&&(element.style.borderColor="#ff2626",element.style.boxShadow="0 0 10px #ff2626")}function outline_req_tissue(class_name){const x=document.getElementById("Entries_all").querySelectorAll(class_name);for(let i=0;i<x.length;i+=1){const tissue_sub_parse=`tissue${i+1}_subunit`;if(document.getElementById(tissue_sub_parse)?.value?.length<=0){const parentEl=document.getElementsByName(`tissue${i+1}`)[0];parentEl&&(parentEl.style.border="1px solid #ff2626",parentEl.style.boxShadow="0 0 10px #ff2626")}}}function outline_links(bam_name,repo_name){const repo_match=document.getElementById("Entries_all").querySelectorAll(repo_name).length,x=document.getElementById("Entries_all").querySelectorAll(repo_name),bam_x=document.getElementById("Entries_all").querySelectorAll(bam_name);for(let i=0;i<repo_match;i++)if("bam_input"===x[i].id)if(x[i].value.length>0){let bamHostType,urlValue;bam_x?.[i]?.value&&(bamHostType=bam_x[i].value.trim());try{urlValue=new URL(x[i].value)}catch{console.error("Unreadable URL presented: ",x[i].value)}bamHostType&&urlValue?"Amazon AWS"===bamHostType?check_amazon_for_bam(x[i].value)&&["s3.amazonaws.com","araport.cyverse-cdn.tacc.cloud"].includes(urlValue[host])?(x[i].style.borderColor=null,x[i].style.boxShadow=null):(x[i].style.borderColor="#ff2626",x[i].style.boxShadow="0 0 10px #ff2626"):"Google Drive"===bamHostType&&["drive.google.com"].includes(urlValue[host])?(x[i].style.borderColor=null,x[i].style.boxShadow=null):(x[i].style.borderColor="#ff2626",x[i].style.boxShadow="0 0 10px #ff2626"):(x[i].style.borderColor="#ff2626",x[i].style.boxShadow="0 0 10px #ff2626")}else x[i].style.borderColor="#ff2626",x[i].style.boxShadow="0 0 10px #ff2626"}function check_amazon_for_bam(input){return".bam"==input.slice(-4)}function remove_outline(class_name){document.getElementById("not_filled").innerHTML="";const x=document.getElementById("Entries_all").querySelectorAll(class_name);for(const element of x)element.value.length>0&&(element.style.borderColor=null,element.style.boxShadow=null)}function remove_outline_tissue(class_name){document.getElementById("not_filled").innerHTML="";const x=document.getElementById("Entries_all").querySelectorAll(class_name);for(let i=0;i<x.length;i++)tissue_doc="tissue"+(i+1),tissue_sub_parse_remove="tissue"+(i+1)+"_subunit",document.getElementById(tissue_sub_parse_remove).value.length>0&&(document.getElementById(tissue_doc).style.borderColor=null,document.getElementById(tissue_doc).style.boxShadow=null)}function no_null_contact(){null==document.getElementById("contectinfo")&&(document.getElementById("contectinfo").innerHTML=" ")}let tissue_click="";function designateTissueClick(whichTissue){whichTissue?.includes("tissue")&&(tissue_click=whichTissue)}let which_svg="",tissue_subunit="",clicked_id="";function clickclick(clickid){if(document.getElementById(tissue_click)&&document.getElementById(tissue_click).innerHTML){document.getElementById(tissue_click).innerHTML=clickid.replace(/_/g," "),tissue_subunit=tissue_click+"_subunit",clicked_id=clickid,tissue_sub_name=document.getElementById(clickid).className.split(" ")[1],document.getElementById(tissue_subunit).value=tissue_sub_name;const count_which_click=tissue_click.match(/\d/g).join("");which_svg="svg"+count_which_click;const which_hex="hexID_num"+count_which_click,which_foreground="foregroundID_num"+count_which_click;document.getElementById(which_svg).value=determine_svgname(clickid),document.getElementById(which_hex).value=determine_hexcode(determine_svgname(clickid),clickid),document.getElementById(which_foreground).value=determine_foreground(determine_hexcode(determine_svgname(clickid),clickid))}}function determine_svgname(from_svg){return"10_Day_old_Seedling"==from_svg||"10_Day_old_Seedling_roots"==from_svg||"10_Day_old_Seedling_shoots"==from_svg||"ath-10dayOldSeedling.svg"==from_svg?"ath-10dayOldSeedling.svg":"15_Day_old_Seedling"==from_svg||"15_Day_old_Seedling_roots"==from_svg||"15_Day_old_Seedling_shoots"==from_svg||"ath-15dayOldSeedling.svg"==from_svg?"ath-15dayOldSeedling.svg":"Etiolated_seedling"==from_svg||"ath-etiolatedSeedling.svg"==from_svg?"ath-etiolatedSeedling.svg":"Flower"==from_svg||"Flower_receptacle"==from_svg||"ath-Flower.svg"==from_svg?"ath-Flower.svg":"Carpel_petals_stamen_and_sepals"==from_svg||"Flowers_petals"==from_svg||"Flowers_stamen"==from_svg||"Flowers_sepals"==from_svg||"Flowers_carpel"==from_svg||"ath-FlowerParts.svg"==from_svg?"ath-FlowerParts.svg":"Germinating_seed"==from_svg||"ath-GerminatingSeed.svg"==from_svg?"ath-GerminatingSeed.svg":"Internode"==from_svg||"ath-Internode.svg"==from_svg?"ath-Internode.svg":"leaf"==from_svg||"ath-leaf.svg"==from_svg?"ath-leaf.svg":"Full_leaf"==from_svg||"Leaf_lamina"==from_svg||"Leaf_veins"==from_svg||"Leaf_petiole"==from_svg||"ath-LeafParts.svg"==from_svg?"ath-LeafParts.svg":"Pollen"==from_svg||"ath-Pollen.svg"==from_svg?"ath-Pollen.svg":"Roots_tip"==from_svg||"ath-RootTip.svg"==from_svg?"ath-RootTip.svg":"Rosette_shoot"==from_svg||"Rosette_Plus_Root"==from_svg||"Rosette_root"==from_svg||"ath-rosettePlusRoot.svg"==from_svg?"ath-rosettePlusRoot.svg":"Seed_1-4"==from_svg||"ath-Seed1-4.svg"==from_svg?"ath-Seed1-4.svg":"Seed_5-7"==from_svg||"ath-Seed5-7.svg"==from_svg?"ath-Seed5-7.svg":"Seed_8+"==from_svg||"ath-Seed8+.svg"==from_svg?"ath-Seed8+.svg":"Senescent_Leaf"==from_svg||"ath-SenescentLeaf.svg"==from_svg?"ath-SenescentLeaf.svg":"Shoot_Apex_Inflorescense"==from_svg||"ath-ShootApexInflorescense.svg"==from_svg?"ath-ShootApexInflorescense.svg":"Shoot_Apex_Vegetative-Transition"==from_svg||"ath-ShootApexVegetative-Transition.svg"==from_svg?"ath-ShootApexVegetative-Transition.svg":"Silique_1-5"==from_svg||"ath-Silique1-5.svg"==from_svg?"ath-Silique1-5.svg":"Silique_6-10"==from_svg||"ath-Silique6-10.svg"==from_svg?"ath-Silique6-10.svg":"Young_Leaf_1-4_Leaf"==from_svg||"ath-YoungLeaf1-4.svg"==from_svg?"ath-YoungLeaf1-4.svg":"Early_Budding_Flower"==from_svg||"Early_Budding_Flower_shoot"==from_svg||"Early_Budding_Flower_buds"==from_svg||"ath-EarlyBuddingFlower.svg"==from_svg?"ath-EarlyBuddingFlower.svg":"Flower_Bud"==from_svg||"ath-FlowerBud.svg"==from_svg?"ath-FlowerBud.svg":"Stamen"==from_svg||"Stamen_anthers"==from_svg||"Stamen_filament"==from_svg||"ath-Stamen.svg"==from_svg?"ath-Stamen.svg":"Stigma_and_Ovaries"==from_svg||"Stigma"==from_svg||"Ovaries"==from_svg||"ath-StigmaAndOvaries.svg"==from_svg?"ath-StigmaAndOvaries.svg":"Whole_Silique"==from_svg||"Whole_Silique_silique"==from_svg||"Whole_Silique_seed"==from_svg||"ath-WholeSilique.svg"==from_svg?"ath-WholeSilique.svg":"young_Seedling"==from_svg||"young_Seedling_root"==from_svg||"young_Seedling_hypocotyl"==from_svg||"young_Seedling_cotyledon"==from_svg||"ath-youngSeedling.svg"==from_svg?"ath-youngSeedling.svg":"Flower_Development_1"==from_svg||"flowerDevelopmentPart1"==from_svg||"ath-FlowerDevelopment1.svg"==from_svg?"ath-FlowerDevelopment1.svg":"Flower_Development_2"==from_svg||"flowerDevelopmentPart2"==from_svg||"ath-FlowerDevelopment2.svg"==from_svg?"ath-FlowerDevelopment2.svg":"Flower_Development_3"==from_svg||"flowerDevelopmentPart3"==from_svg||"ath-FlowerDevelopment3.svg"==from_svg?"ath-FlowerDevelopment3.svg":"Flower_Development_4"==from_svg||"flowerDevelopmentPart4"==from_svg||"ath-FlowerDevelopment4.svg"==from_svg?"ath-FlowerDevelopment4.svg":"Flower_Development_5"==from_svg||"flowerDevelopmentPart5"==from_svg||"ath-FlowerDevelopment5.svg"==from_svg?"ath-FlowerDevelopment5.svg":"Flower_Development_6-8"==from_svg||"flowerDevelopmentPart6"==from_svg||"ath-FlowerDevelopment6-8.svg"==from_svg?"ath-FlowerDevelopment6-8.svg":"Flower_Development_9-11"==from_svg||"flowerDevelopmentPart9"==from_svg||"ath-FlowerDevelopment9-11.svg"==from_svg?"ath-FlowerDevelopment9-11.svg":"Flower_Development_12-14"==from_svg||"flowerDevelopmentPart12"==from_svg||"ath-FlowerDevelopment12-14.svg"==from_svg?"ath-FlowerDevelopment12-14.svg":"Other"==from_svg||"ath-Other.svg"==from_svg?"ath-Other.svg":"GuardCell.svg"===from_svg||"ath-GuardCell.svg"===from_svg?"ath-GuardCell.svg":void 0}function determine_hexcode(which_svg,svg_subunit){return"ath-10dayOldSeedling.svg"==which_svg&&"10_Day_old_Seedling_shoots"==svg_subunit?"0x989800":"ath-10dayOldSeedling.svg"==which_svg&&"10_Day_old_Seedling"==svg_subunit?"0x98FF00":"ath-10dayOldSeedling.svg"==which_svg&&"10_Day_old_Seedling_roots"==svg_subunit?"0xCCCC97":"ath-15dayOldSeedling.svg"==which_svg&&"15_Day_old_Seedling_roots"==svg_subunit||"ath-15dayOldSeedling.svg"==which_svg?"0xbd7740":"ath-etiolatedSeedling.svg"==which_svg?"0xCCCC97":"ath-Flower.svg"==which_svg&&"Flower_receptacle"==svg_subunit?"0xcaff00":"ath-Flower.svg"==which_svg&&"Flower"==svg_subunit?"0xCCCC97":"ath-Flower.svg"==which_svg?"0xCCFF00":"ath-FlowerParts.svg"==which_svg&&"Flowers_carpel"==svg_subunit?"0xe7ff65":"ath-FlowerParts.svg"==which_svg&&"Flowers_petals"==svg_subunit?"0xcbcb32":"ath-FlowerParts.svg"==which_svg&&"Flowers_sepals"==svg_subunit?"0xcaff00":"ath-FlowerParts.svg"==which_svg?"0xcbcb32":"ath-GerminatingSeed.svg"==which_svg?"0xf77700":"ath-Internode.svg"==which_svg?"0x99ccff":"ath-leaf.svg"==which_svg?"0x64CC65":"ath-LeafParts.svg"==which_svg&&"Leaf_lamina"==svg_subunit?"0x65cc66":"ath-LeafParts.svg"==which_svg&&"Leaf_petiole"==svg_subunit?"0x00cbff":"ath-LeafParts.svg"==which_svg&&"Leaf_veins"==svg_subunit?"0x007eff":"ath-LeafParts.svg"==which_svg?"0x65cc66":"ath-Pollen.svg"==which_svg?"0xFF0000":"ath-RootTip.svg"==which_svg?"0xBD7740":"ath-rosettePlusRoot.svg"==which_svg?"0x64cc65":"ath-Seed1-4.svg"==which_svg?"0xfe9900":"ath-Seed5-7.svg"==which_svg?"0xfecc00":"ath-Seed8+.svg"==which_svg?"0xf77700":"ath-SenescentLeaf.svg"==which_svg?"0x64cc65":"ath-ShootApexInflorescense.svg"==which_svg?"0x979999":"ath-ShootApexVegetative-Transition.svg"==which_svg?"0x64cc65":"ath-Silique1-5.svg"==which_svg?"0x937326":"ath-Silique6-10.svg"==which_svg?"0x818211":"ath-YoungLeaf1-4.svg"==which_svg?"0x64cc65":"ath-EarlyBuddingFlower.svg"==which_svg?"0xffff66":"ath-FlowerBud.svg"==which_svg?"0xFFFF65":"ath-Stamen.svg"==which_svg&&"Stamen_anthers"==svg_subunit?"0xff5d5d":"ath-Stamen.svg"==which_svg&&"Stamen_filament"==svg_subunit?"0xcaff00":"ath-Stamen.svg"==which_svg?"0xff5d5d":"ath-StigmaAndOvaries.svg"==which_svg&&"Ovaries"==svg_subunit?"0xccff65":"ath-StigmaAndOvaries.svg"==which_svg&&"Stigma"==svg_subunit?"0xcaff00":"ath-WholeSilique.svg"==which_svg&&"Whole_Silique_silique"==svg_subunit?"0xb2b42a":"ath-WholeSilique.svg"==which_svg?"0x929326":"ath-youngSeedling.svg"==which_svg&&"young_Seedling_cotyledon"==svg_subunit?"0x99ff00":"ath-youngSeedling.svg"==which_svg&&"young_Seedling_hypocotyl"==svg_subunit?"0xcccc98":"ath-youngSeedling.svg"==which_svg&&"young_Seedling_root"==svg_subunit?"0xc38c60":"ath-youngSeedling.svg"==which_svg?"0x99ff00":"ath-FlowerDevelopment1.svg"==which_svg||"ath-FlowerDevelopment2.svg"==which_svg?"0xe8e846":"ath-FlowerDevelopment3.svg"==which_svg||"ath-FlowerDevelopment4.svg"==which_svg?"0xd3d332":"ath-FlowerDevelopment5.svg"==which_svg||"ath-FlowerDevelopment6.svg"==which_svg||"ath-FlowerDevelopment9.svg"==which_svg||"ath-FlowerDevelopment12.svg"==which_svg?"0xe8e846":"ath-FlowerDevelopment15.svg"==which_svg||"ath-FlowerDevelopment19.svg"==which_svg?"0xffff66":"ath-Other.svg"==which_svg?"0x64cc65":"ath-GuardCell.svg"===which_svg?"0xd9ffb3":void 0}function determine_foreground(hexcode_colour){if(hexcode_colour&&hexcode_colour.length>2&&hexcode_colour.length<9)return hexcode_colour.substring(2).toUpperCase();console.log("Error retrieving foreground hexcode on the following hexcode: "+hexcode_colour)}function convert_to_json(){document.getElementById("dataInput").value=document.getElementById("dataInput").value.trim(),document.getElementById("closeExcel_modal").click();const excelOutput=[],dataInput=document.getElementById("dataInput").value.trim().split("\n"),inputHeaders=["title","description","record number","rna-seq data/bam file repository link","repository type","bam filename","publication link","sra/ncbi link","total reads mapped","read map method","species","tissue","tissue subunit","controls","replicate controls"];for(let i in dataInput)if(dataInput[i].split("\t")[0]){const inputValuesArray=dataInput[i].split("\t");if(0==i&&"Title*"===inputValuesArray[0].trim())continue;{const tempData={};for(let v in inputValuesArray)inputHeaders[v]&&(tempData[inputHeaders[v]]=inputValuesArray[v].trim());excelOutput.push(tempData)}}resetForm();for(let i in excelOutput){i>0&&CloneSection(),$("select[id=bamType]").last().val(excelOutput[i]["repository type"]),$("input[id=reqtitle]").last().val(excelOutput[i].title),$("textarea[id=reqdesc]").last().val(excelOutput[i].description),$("input[id=rec]").last().val(excelOutput[i]["record number"]),$("input[id=bam_input]").last().val(excelOutput[i]["rna-seq data/bam file repository link"]),$("input[id=filename]").last().val(excelOutput[i]["bam filename"]),$("input[id=publink]").last().val(excelOutput[i]["publication link"]),$("input[id=sralink]").last().val(excelOutput[i]["sra/ncbi link"]),$("input[id=reqread]").last().val(excelOutput[i]["total reads mapped"]),$("input[id=readmapmethod]").last().val(excelOutput[i]["read map method"]),$("select[id=reqspecies]").last().val(excelOutput[i].species);const json_svg="svg"+(parseInt(i)+1);$("input[id="+json_svg+"]").last().val(determine_svgname(excelOutput[i].tissue));const json_tissue="tissue"+(parseInt(i)+1);$("button[id="+json_tissue+"]").last().html(excelOutput[i].tissue.split("_").join(" ")),console.log(json_tissue,excelOutput[i].tissue);const json_subunit="tissue"+(parseInt(i)+1)+"_subunit";$("input[id="+json_subunit+"]").last().val(excelOutput[i]["tissue subunit"]);const hexColour="hexID_num"+(parseInt(i)+1),hexColourCode=determine_hexcode(determine_svgname(excelOutput[i].tissue),excelOutput[i]["tissue subunit*"]);$("input[id="+hexColour+"]").last().val(hexColourCode.toString());const foregroundColour="foregroundID_num"+(parseInt(i)+1);$("input[id="+foregroundColour+"]").last().val(determine_foreground(hexColourCode)),$("input[id=controls]").last().val(excelOutput[i].controls),$("input[id=replicate_controls1]").last().val(excelOutput[i]["replicate controls"])}}let warningActive="nope";function showWarning(){"nope"==warningActive?(document.getElementById("warning").className="warning",warningActive="yes"):"yes"==warningActive&&hideWarning()}function hideWarning(){document.getElementById("warning").className="warning_nope",warningActive="nope"}function update_accountAdd_options(){if(""!=parent.users_email&&parent.title_list.length>0){document.getElementById("account_dataDisplay").removeAttribute("style");for(const element of parent.title_list){const account_SRR_let="'"+element+"'";$("#existingDropdown_menu").append('<li style="padding-left: 3px;" onclick="openDataset(event, '+account_SRR_let+'); display_add_button(true); display_or = true;">'+element+"</li>"),$("#privateDatasets").append('<div id="'+element+'" class="tabcontent"><h3>'+element+'</h3><div id="'+element+'_xml"></div></div>')}}else document.getElementById("account_dataDisplay").style.display="none"}function update_existingAdd_options(){display_add_button(display_or),parent.get_user_XML_display(),update_accountAdd_options();const araport11XML=new XMLHttpRequest;araport11XML.open("GET","cgi-bin/data/bamdata_araport11.xml",!0),araport11XML.responseType="document",araport11XML.send(),setTimeout((function(){retrieveSRR_existing(araport11XML,"araport11XML")}),1e3);const klepikovaXML=new XMLHttpRequest;klepikovaXML.open("GET","cgi-bin/data/bamdata_Developmental_transcriptome.xml",!0),klepikovaXML.responseType="document",klepikovaXML.send(),setTimeout((function(){retrieveSRR_existing(klepikovaXML,"klepikovaXML")}),1e3)}const display_or=!1;function display_add_button(display_out){display_out?document.getElementById("addToData").removeAttribute("style"):display_out||(document.getElementById("addToData").style.display="none")}function retrieveCONTENT_existing(xml,SRR_num){let x,xmlDoc;xmlDoc=xml.responseXML,x=xmlDoc.getElementsByTagName("file");for(const element of x)element.getAttribute("record_number")==SRR_num&&(console.log(element),existingXML+="\t\t",existingXML+=element.outerHTML,existingXML+="\n")}function addPublic_toExisting(){existingXML=[].join("\r\n");const araport11_count=document.getElementById("araport11XML").childElementCount/2;for(let i=0;i<araport11_count;i++){const addBox_id="addBox"+i;if(document.getElementById(addBox_id).checked){const araport11XML=new XMLHttpRequest;araport11XML.open("GET","cgi-bin/data/bamdata_araport11.xml",!0),araport11XML.responseType="document",araport11XML.send(),setTimeout((function(){retrieveCONTENT_existing(araport11XML,document.getElementById(addBox_id).value)}),1e3)}}const klepikovaXML_count=document.getElementById("klepikovaXML").childElementCount/2;for(let i=0;i<klepikovaXML_count;i++){const addBox_id="addBox"+i;if(document.getElementById(addBox_id).checked){const klepikovaXML=new XMLHttpRequest;klepikovaXML.open("GET","cgi-bin/data/bamdata_Developmental_transcriptome.xml",!0),klepikovaXML.responseType="document",klepikovaXML.send(),setTimeout((function(){retrieveCONTENT_existing(klepikovaXML,document.getElementById(addBox_id).value)}),1e3)}}}function openDataset(evt,datasetName){let tabcontent,tablinks;tabcontent=document.getElementsByClassName("tabcontent");for(const element of tabcontent)element.style.display="none";tablinks=document.getElementsByClassName("tablinks");for(const element of tablinks)element.className=element.className.replace(" active","");document.getElementById(datasetName).style.display="block",evt.currentTarget.className+=" active"}function changeWidthConverter(){document.getElementById("converter")&&document.getElementById("dataInput")&&(document.getElementById("converter").style.width="100%",document.getElementById("dataInput").style.width="100%")}function updateTable(tableIndicator){let input,filter,table,td;input=document.getElementById(tableIndicator),filter=input.value.toLowerCase(),table=document.getElementById("tissueTable_"+tableIndicator);const th=table.getElementsByTagName("td");for(const element of th)td=element,td&&(td.innerHTML.toLowerCase().indexOf(filter)>-1?element.style.display="":element.style.display="none")}function bamType_placeholder(){"Google Drive"==document.getElementById("bamType").value?$("#bam_input").attr("placeholder",'Please input a Shared View link WITHOUT the "?usp=sharing." at the end'):"Amazon AWS"==document.getElementById("bamType").value&&$("#bam_input").attr("placeholder","Please input the link end with the file like /name.bam")}function toggleTissueSelection(whichDOM){document.getElementById(whichDOM+"_select").classList.value.includes("show")?document.getElementById(whichDOM+"_select").classList.remove("show"):document.getElementById(whichDOM+"_select").classList.add("show")}function initGen(){changeWidthConverter()}setTimeout((function(){initGen()}),1e3);