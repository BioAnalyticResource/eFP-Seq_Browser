const e="v1.3.15-p20240710",t=window.location.href.includes("localhost:3030"),n=t?"http://localhost:3040":".";let o,l="abs";null!=document.getElementById("locus")&&(o=document.getElementById("locus").value);let a,s,r,d=o;null!=document.getElementById("yscale_input")&&(s=document.getElementById("yscale_input").value),null!=document.getElementById("rpkm_scale_input")&&(r=document.getElementById("rpkm_scale_input").value);let c=10326918,m=10330048,u="",g=[],p=[],h=0;const f=new Date;let b,_,A=f.getTime(),y=-1,D=-1,w=null,v=null,E="cgi-bin/data/bamdata_araport11.xml",B="";const I={"Araport 11 RNA-seq data":"cgi-bin/data/bamdata_araport11.xml","Developmental transcriptome - Klepikova et al":"cgi-bin/data/bamdata_Developmental_transcriptome.xml"};let x=I,R=!1,k=113;function count_bam_num(){const e=new XMLHttpRequest,t=E;e.responseType="document",e.onreadystatechange=()=>{if(e.readyState===XMLHttpRequest.DONE&&200===e.status){const t=e.responseXML;t&&t.getElementsByTagName("file")?k=e.responseXML.getElementsByTagName("file").length:null==t&&console.log("failed at response"),document.getElementById("testing_count").innerHTML=k}},e.open("GET",t),e.send()}function loadingScreen(e=!0){if(!1===e){document.getElementById("loading_screen").className="loading",document.getElementById("body_of").className="body_of_loading",document.getElementById("bodyContainer").classList.add("progressLoading"),document.getElementById("loading_screen").removeAttribute("hidden");const e=document.getElementsByClassName("disableOnLoading");for(const t of e)$("#"+t.id).prop("disabled",!0)}else{document.getElementById("loading_screen").className="loading done_loading",document.getElementById("body_of").className="body_of_loading body_of_loading_done",document.getElementById("bodyContainer").classList.remove("progressLoading"),document.getElementById("loading_screen").setAttribute("hidden",!0);const e=document.getElementsByClassName("disableOnLoading");for(const t of e)$("#"+t.id).prop("disabled",!1);addGFF(),Ie=!1}}count_bam_num();const T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcIAAAAyCAYAAADP/dvoAAAABmJLR0QAwADAAMAanQdUAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAAB3RJTUUH4AoRDzYeAMpyUgAABGJJREFUeNrt3TFoE3scwPGvjxtOzKAQMEOECBkyROhQsWOEChURBFtssdJFB9Gl4OJkwaEtRRAUdLAUqYJgwamIEFAwUoS43RCw0AwpOjhkuCHDQd5Qes9q+7A+7cP2+1na5K53cH/Kl19yIfu63W4XSZL2qL+8BJIkQyhJ0h4VfPvExMSEV0WStGt92zknQkmSE+GPFFOSpN00CToRSpJkCCVJhlCSJEMoSZIhlCTJEEqSZAglSTKEkiQZQkmSDKEkSYZQkiRDKEmSIZQkyRBKe8HDhw/5/Pnzbzn2/v3709/Hx8d/23kkGULpp01PT9NoNH7LsTudDgBJktBut0mSxAsu/Q8CL4G0fUmSEEURcRxTLpc5ePBguu3Lly9EUUQ2m6VcLm/4u0ajQRzH9PT0/PNPGARcu3aNXC6X7lMqlVheXv5u3/Xt69NjJpOht7fXBZEMobRz2u02Z8+eJY5jCoUCtVqN58+fU6lUePLkCXfu3KGnp4d6vU5vby9zc3PA2peCzs7OUiqVvjvm8ePHWVlZoVAocPr0aQYHB6nX6zSbTSqVSnqMkZGRdHp88+YNw8PDzM/PuyiSIZR2zv3798lms7x9+xZYex/x5s2bLC0tce7cOYaHhwmCgHa7zaFDh5ibm6PZbDI9Pc3Hjx/J5/MsLCxQrVa3PMfhw4d5/fo1rVaLI0eOMDk5CUC1WuXTp08EQcCxY8e4cOGCCyIZQmlnffjwgfPnz6ePBwYGuHr1KrD2UmW1WqVWq7G6upru02w2yeVy5PN5AAYHB//1HOvb1/fvdDpkMhniOGZ5eZlCoUCSJOnLqZIMobRjkiRJb3RZF4YhAFNTUywuLnLr1i2KxSKPHj36df+sQUChUODSpUt0Oh0uXrzo+4PSL+Bdo9I2nThxgsePH6d3eS4sLDAwMADA+/fvOXPmDP39/RtiWSqVaLVaRFEEwN27d7d93iiKCIKA27dv8+DBAy5fvpxuazQa1Ov1dHp89uxZuq1ardJqtVw4yYlQ2r4wDDl58mT6eGZmhuvXr/Pu3TuOHj1KJpMhDENevHgBwNjYGFeuXOHVq1eEYUg2mwUgl8sxMzPDqVOnyOfz9PX1pS97/sgkCFAul2m32zx9+pQkSajVaoyOjjI5Ocns7CxRFPHy5UuiKGJkZIT+/n6y2Szj4+OMjY1x48YNF1TaxL5ut9v9+omJiYkNPyVtLo5jkiTZ8NEJWPv4BJBG8GudTockSchkMts+39TUFKurq9y7dw+Aer3O0NAQKysrLob0A7bqmxOh9JO2itlmAfx6wvxZfX19DA0NEYYhBw4cYHFxkdHRURdC+o8MofSHqFQqLC0tUavVAJifn9/0M4mSDKG0axWLRYrFohdC+oW8a1SSZAglSTKEkiQZQkmSDKEkSYZQkiRDKEmSIZQkyRBKkmQIJUkyhJIkGUJJkgyhJEmGUJKkP9mWX8PkN9RLkpwIJUna5fZ1u92ul0GS5EQoSdIe9DfEVWhcl8IjHgAAAABJRU5ErkJggg==";let M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcIAAAAIBAMAAACYMuIQAAAAFVBMVEX///8AAADcFDz/jAAAAP+m 3KYAfQDytQt7AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAATklEQVQ4jWNgYGANxQnC0iAggQEE0mAA lYcFgBWw4RZIQOEmYJNF0Q4zAQ4Qkqm4XQ8CIMWMw96HgsPdh4zD3oeCwx2MgDgc/vlw2JelAO7V xD0GmsY3AAAAAElFTkSuQmCC ";const C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcIAAAAICAIAAADlfmh0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMBSURBVGhD7Vi7ceswEGQrVBUMxC40wwKYKVANDpwpVuIqVIx6ealxHxzuA9BPsmfMGQOzgQgs7hZH3RrW8O/20dHR0dHxMrqN7gbneZAxLg/3GAlh13R6r8QhmgYQDtc3/Py2TMOwni2hCtg13/UM7M1x/gh06b6JHwxVx2X9zzfb8W10G90NXF/JozhdnNEmCKsNGgUU6EQtTgTsetZG99DJv6Xh18/eEtDt9efRbXQ30O6mH8XpwszjdFDWBu0BF9K40XmlTqSDj/M6ljssBqeBKXDXRASagb0c536k+WE4XjjL7f3KZJ4sHH1HRgF5QFgfKggzoRxnXO5GdluD04mPcGQfwQR/5CNXimNE+rwxi4RKM1ZVYKoPGwfPJc2px4P6ktDwBfGn6HgV3UZ3g9QSeWQ35BH/W6cZaCrXP6m74kbxSmICoWaj9MGR5fIiBPFrMQJYoj50N53yiB1bOCyM5tER0llgMoaKwjY4GBMhqYuGls6sDQoowurB5cgtTqmeSZHgs7SrB0x4rYmZ/m7B0tfFyVkKxy+JHi+sNtPxHLqN7gbwvVctmh+LV4YZ5U0J0Ay52exGB53oK2+iYXvYGwHKKAOWKJHqTyXGuhUKwAHBK6GCsAYnn8jJVhqaOrkIiYlBKgfX5WpxbPVU3nqWjerx0mUdl+sxbQE/rTO1NgRwuM5ZgJOqhfmlEqfjKXQb3Q1cS8gjt19rRrcErkaafKDI+Ehtg52J/Q+7jBGA8cE9ER5zx1KQPANxJCPtdSgdWxLpNpZ7lmyJoYKwBgeVkF9r2TpdUyc4Ow5YrR2cg8uRaxwrUuetZdmsHjDX0zKlFOd5Os4TESJTa0PYFwoCNgoSlkqcjqfQbXQ3wO89j3ShKB2C7Ycd5WfsDUuZhaU5G7W51C5q0dxmzIHfQ9kp3G+UYgTUkDxMV/M8SBUTYeUMpYQ62YeKwuqcnNfJNhqaOrmMJMxF0MGN9zlOQ6Q6rMmyWT1iQhx8dxJk6+CMXGd8WZX3qIWFpY5XcPv4BMHOh4rKP1r3AAAAAElFTkSuQmCC",F="iVBORw0KGgoAAAANSUhEUgAAAGQAAAAPCAMAAAAlD5r/AAABQVBMVEX///8AAADcFDz/jAAAAP+m 3KYAfQD//wD//AD/+QD/9wD/9AD/8gD/7wD/7QD/6gD/6AD/5QD/4gD/4AD/3QD/2wD/2AD/1gD/ 0wD/0QD/zgD/zAD/yQD/xgD/xAD/wQD/vwD/vAD/ugD/twD/tQD/sgD/rwD/rQD/qgD/qAD/pQD/ owD/oAD/ngD/mwD/mQD/lgD/kwD/kQD/jgD/jAD/iQD/hwD/hAD/ggD/fwD/fAD/egD/dwD/dQD/ cgD/cAD/bQD/awD/aAD/ZgD/YwD/YAD/XgD/WwD/WQD/VgD/VAD/UQD/TwD/TAD/SQD/RwD/RAD/ QgD/PwD/PQD/OgD/OAD/NQD/MwD/MAD/LQD/KwD/KAD/JgD/IwD/IQD/HgD/HAD/GQD/FgD/FAD/ EQD/DwD/DAD/CgD/BwD/BQD/AgCkIVxRAAAAs0lEQVQ4jWNg5+Dk4ubh5eMXEBQSFhEVE5eQlJKW kZWTV1BUUlZRVVPX0NTS1tHV0zcwNDI2MTUzt7C0sraxtbN3cHRydnF1c/fw9PL28fXzDwgMCg4J DQuPiIyKjomNi09ITEpOSU1Lz8jMYhi1hERLGBmpbgljbBwjiiWMnFyMVLcECOhkCZBIZUzPYKSV JaDgYkxKZkxNY2SkmU8gljDCLaFdxDMmw4NrGOWTUUuItwQAG8496iMoCNwAAAAASUVORK5CYII= ",S="iVBORw0KGgoAAAANSUhEUgAAAGQAAAAPCAMAAAAlD5r/AAABQVBMVEX///8AAADcFDz/jAAAAP+m 3KYAfQAAAP8FBfkKCvQPD+8UFOoZGeUeHuAjI9soKNYtLdEzM8w4OMY9PcFCQrxHR7dMTLJRUa1W VqhbW6NgYJ5mZplra5NwcI51dYl6eoR/f3+EhHqJiXWOjnCTk2uZmWaenmCjo1uoqFatrVGysky3 t0e8vELBwT3GxjjMzDPR0S3W1ijb2yPg4B7l5Rnq6hTv7w/09Ar5+QX//wD/+wD/9gD/8QD/7AD/ 5wD/4gD/3QD/2AD/0wD/zQD/yAD/wwD/vgD/uQD/tAD/rwD/qgD/pQD/oAD/mgD/lQD/kAD/iwD/ hgD/gQD/fAD/dwD/cgD/bQD/ZwD/YgD/XQD/WAD/UwD/TgD/SQD/RAD/PwD/OgD/NAD/LwD/KgD/ JQD/IAD/GwD/FgD/EQD/DAD/BwBUljDTAAAA1klEQVQ4jWNg5+Dk4ubh5eMXEBQSFhEVE5eQlJKW kZWTV1BUUlZRVVPX0NTS1tHV0zcwNDI2MTUzt7C0sraxtbN3cHRydnF1c/fw9PL28fXzDwgMCg4J DQuPiIyKjomNi09ITEpOSU1Lz8jMYhi1hDRLGDi5GICWMBBvCSMjIUsYY+MYUS0BApJ8wmhlzUjI EiDAYgkD0CcMwgxUtQRIpDKmZzCiBBcDgwgDlSwBBRdjUjJjahojI2qcMAhT2RJGNEuAYUasJURH PGMyPLiGTz4ZtYQESwCEoDnh8dGTkQAAAABJRU5ErkJggg==",P="iVBORw0KGgoAAAANSUhEUgAAALQAAAAPBAMAAAC/7vi3AAAAGFBMVEX///9QUFAAAADcFDz/jAAA AP+m3KYAfQCnICW7AAAArklEQVQ4jd3UMQ+CQAwF4OaG66ourpcO/DCGm7v17/vKBUU8SozBGBvy xo9HD6DzB3OicK4WTa7RfIGWgiiH0In6tBK/iMpKhsvyWAfB7NGlJEHQFA+6U5ZVjf2OTtfBI6YF OgIpadkaklGjZtrepIsXL63+U2s8vzHpila+0zsLEQe9ty+kQ7OuFgJ+pseY3nr5cIxtIQt6OkY/ 3lxReHMhF4nm1z+Zv6KP+/PdANuwQcLhhEyQAAAAAElFTkSuQmCC";function generate_colour(e,t,n){e=e.replace(/^\s*#|\s*$/g,""),t=t.replace(/^\s*#|\s*$/g,""),3==e.length&&(e=e.replace(/(.)/g,"$1$1")),3==t.length&&(t=t.replace(/(.)/g,"$1$1"));let o=parseInt(e.substr(0,2),16),l=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16),s=parseInt(t.substr(0,2),16)-o,i=parseInt(t.substr(2,2),16)-l,r=parseInt(t.substr(4,2),16)-a;return s=(s*n+o).toString(16).split(".")[0],i=(i*n+l).toString(16).split(".")[0],r=(r*n+a).toString(16).split(".")[0],1==s.length&&(s="0"+s),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),"#"+s+i+r}function round(e,t){return parseFloat(e.toFixed(t))}let N;function colour_part_by_id(e,t,n,o){N="all";for(const r of te)e.replace("_svg","")==r&&(N=ne[r].svg_part);let l,a,s=n;s=Array.isArray(s)?s[O]:parseFloat(s),r=document.getElementById("rpkm_scale_input").value,(!r||r<=0)&&(r=1e3),document.getElementById(e)&&(l=document.getElementById(e).getElementsByTagName("path"),a=document.getElementById(e).getElementsByTagName("g"));let i=null;if(l&&a&&(i=Array.prototype.slice.call(l).concat(Array.prototype.slice.call(a))),null!=i){if("abs"==o){const e=255,t=255-parseInt(s/r*255),n=0;if("all"==N)for(const o of i)o.style.fill="rgb("+e+", "+t+", "+n+")";else for(const o of i)if(o.id==N)if("g"==o.tagName){const l=o.getElementsByTagName("path");for(const o of l)o.style.fill="rgb("+e+", "+t+", "+n+")"}else o.style.fill="rgb("+e+", "+t+", "+n+")"}else if("rel"==o){let e="";const t=3;let n=0;if("Missing controls data"!=s&&Math.abs(s)>t?n=t:"Missing controls data"!=s&&(n=Math.abs(s)),n/=t,"Missing controls data"==s?e="#D9D9D9":s>0?e=generate_colour("FFFF00","FF0000",n):0==s?e="FFFF00":s<0&&(e=generate_colour("FFFF00","0000FF",n)),"all"==N)for(const o of i)o.style.fill=e;else for(const o of i)if(o.id==N)if("g"==o.tagName){const t=o.getElementsByTagName("path");for(const n of t)n.style.fill=e}else o.style.fill=e}document.getElementById(e.replace("_svg","_rpkm")).innerHTML="Missing controls data"==s?s:round(s,2)}else console.log("Paths is null for id = "+e)}let L=1,Q=1;function findRPKMValuesAcrossAll(){if(ne){const e=Object.keys(ne),t=[];let n=0;for(const o of e)if(ne[o].RPKM){const e=ne[o].RPKM[O];parseFloat(e)&&(t.push(e),n+=e)}t.length>0&&(Q=math.median(t)),L=n/e.length}else displayError("ERROR IN RETRIEVING ALL DATA POINTS WITHIN DATASET")}function switchRPKMMode(e){let t=!1;"rel_radio"===e&&(t=!0),t?(l="rel",document.getElementById("abs_radio").classList.remove("active"),document.getElementById("rel_radio").classList.add("active"),$("#rpkm_scale_input").prop("disabled",!0)):(l="abs",document.getElementById("rel_radio").classList.remove("active"),document.getElementById("abs_radio").classList.add("active"),$("#rpkm_scale_input").removeAttr("disabled")),g&&g.length>0&&whichAbsOrRel()}function colour_svgs_now(){const e=l;for(let t=0;t<k;t++){if(p[t]){const e=p[t][0].slice(0,-4);let n=0,o=0,a=0;for(let l=0;l<k;l++)-1!=p[t][2].indexOf(p[l][0].slice(0,-4))&&(o++,n+=p[l][3][O]);0===n&&ne[e].RPKM&&(n=ne[e].RPKM[O]),o>0?a=n/o:(Q&&1===Q&&findRPKMValuesAcrossAll(),a=Q);let s=0;const i=[];let r="";r=ne[e].RPKM&&ne[e].RPKM[O]?ne[e].RPKM[O]:0,0==r&&0==a?p[t].splice(4,1,0):s=Math.log2(r/a),i.push(s),ne[e].relativeRPKM=s,p[t].splice(4,1,i),p[t].splice(6,1,a),r>=y&&(y=r),"Missing controls data"!=p[t][4]&&Math.abs(p[t][4])>=D&&Math.abs(p[t][4])<1e3&&(D=Math.abs(p[t][4])),"rel"===l?p[t][4]||0==p[t][4]||(p[t][4]=-999999):p[t][3][O]||0==p[t][3][O]||(p[t][3][O]=-999999)}else logError("Issue retrieving exp_info for "+e+" within BAM entry point "+t);whichAbsOrRel()}document.getElementById("landing").setAttribute("hidden","true"),$("#theTable").trigger("update"),change_rpkm_colour_scale(l)}function get_input_values(){o=document.getElementById("locus").value,o=o.trim().toUpperCase(),s=document.getElementById("yscale_input").value,("Auto"==s||parseInt(s)<1)&&(s=parseInt(-1)),r=document.getElementById("rpkm_scale_input").value}function update_all_images(e){null!=document.getElementById("locus")&&(a=document.getElementById("locus").value,a===d?($.xhrPool.abortAll(),variants_radio_options(e)):a!=d&&(getGFF(a),d=a,setTimeout((function(){$.xhrPool.abortAll(),variants_radio_options(e)}),1650)))}async function variants_radio_options(e){get_input_values(),fetch(`${n}/cgi-bin/get_gene_structures.cgi?locus=${o}`).then((async t=>{const n=await t.json();c=n.locus_start,m=n.locus_end,u=JSON.stringify(n.splice_variants),populate_table(e),populate_efp_modal(e);const o=document.getElementById("variants_div");if(o?.firstChild)for(;o.firstChild;)o.removeChild(o.firstChild);$("#variant_select").ddslick("destroy");let l='<select id="variant_select">';if(n.variant_count&&parseInt(n.variant_count)>0)for(let e=0;e<parseInt(n.variant_count);e++)n.splice_variants?.[e]?.gene_structure&&(l+='<option value="'+e+'"',l+=' data-imagesrc="data:image/png;base64,'+n.splice_variants[e].gene_structure+'" style="max-width:none;"></option>');else l+='<option value="'+i+'"',l+=' data-imagesrc="'+C+'" style="max-width:none;"></option>';if(n.splice_variants?.[0]?.gene_structure){M="data:image/png;base64,"+n.splice_variants[0].gene_structure;const e=document.getElementsByClassName("gene_structure_img");for(const t of e)t.src="data:image/png;base64,"+n.splice_variants[0].gene_structure}else{M=C;const e=document.getElementsByClassName("gene_structure_img");for(const t of e)t.src="data:image/png;base64,"+n.splice_variants[0].gene_structure}$("input[type=radio][name=radio_group]").change((function(){gene_structure_radio_on_change()})),l+="</select></div>",$("#variants_div").append(l),document.getElementById("variant_select")&&$("#variant_select").ddslick({width:"100%",onSelected:function(){gene_structure_radio_on_change()}}),document.getElementById("landing").setAttribute("hidden","true"),$("#theTable").trigger("update")})).catch((e=>{displayError("ERROR processing and getting gene structures!"),generateToastNotification(`Error processing gene structures: ${e.message}`,"ERROR"),console.error(`Error processing gene structures: ${e.message}`)}))}function displayError(e){$("#displayError").empty();let t='<p class="warning_core" style="text-align:center;">'+e+" <br /><br /> PLEASE REFRESH PAGE, RELOAD OR RE-INPUT DATA OR TRY AGAIN AT A LATER TIME </p>";console.error("Error in logic:",e),$("#displayError").append(t),$("#locus_button").prop("disabled",!0),$("#abs_scale_button").prop("disabled",!0),V=100,$("div#progress").width(V+"%"),loadingScreen(!0),document.title=`eFP-Seq Browser: !ERROR! - ${o} - ${ae}`}function logError(e){console.error("Error in logic:",e)}let U,O=0;function gene_structure_radio_on_change(){if(document.getElementsByClassName("dd-selected-value")&&document.getElementsByClassName("dd-selected-value")[0]&&document.getElementsByClassName("dd-selected-value")[0].value){U=document.getElementsByClassName("dd-selected-value")[0].value,O=U;let e=document.getElementsByClassName("dd-selected-image")[0].src;document.getElementsByClassName("dd-selected-image")&&document.getElementsByClassName("dd-selected-image")[0]&&!document.getElementsByClassName("dd-selected-image")[0].alt&&(document.getElementsByClassName("dd-selected-image")[0].alt="RNA-Seq Coverage");let t=document.getElementsByClassName("gene_structure_img");for(let n=0;n<t.length;n++)t[n].src=e;for(let n=0;n<p.length;n++){let t=p[n][0].split("_")[0];document.getElementById(t+"_gene_structure_img").src=e;let o,l=ne[t].r[U].toFixed(2);document.getElementById(t+"_rpb").innerHTML=l,ne[p[n][0].split("_svg")[0]]||(ne[p[n][0].split("_svg")[0]]={}),ne[p[n][0].split("_svg")[0]].rpb=l,ne[t].RPKM&&ne[t].RPKM[U]?o=ne[t].RPKM[U].toFixed(2):ne[t].RPKM?logError("Unable to retrieve RPKM values at: [variant_selected] for "+t):ne[t]?logError('Unable to retrieve RPKM values at: ["RPKM"] for '+t):logError(ne?"Unable to retrieve RPKM values at: SRA within sraDict":"Unable to retrieve RPKM values at: sraDict unreachable"),document.getElementById(t+"_rpkm").innerHTML=o,whichAbsOrRel(!0,n)}}document.getElementById("landing").setAttribute("hidden","true"),$("#theTable").trigger("update")}function whichAbsOrRel(e=!1,t=0){if(!0===e)absOrRel(t);else if(p.length>0)for(let n=0;n<p.length;n++)absOrRel(n);change_rpkm_colour_scale(l)}function absOrRel(e=0){let t=p[e],n=t[0].slice(0,-4);if("rel"==l&&ne[n].relativeRPKM){document.getElementById("compareGeneVariants").disabled=!0,t&&!t[4]&&0!=t[4]&&(t[4]=-999999);let e=ne[n].relativeRPKM.toFixed(2);document.getElementById(t[0].split("_svg")[0]+"_rpkm").innerHTML=e,ne[t[0].split("_svg")[0]].rpkm=e,colour_part_by_id(n+"_svg",ne[n].svg_part,ne[n].relativeRPKM,l)}else{qe.length>0&&(document.getElementById("compareGeneVariants").disabled=!1),t[3]||0==t[3]||(t[3]=-999999);let e="";if(U&&ne[n].RPKM&&ne[n].RPKM[U]){let o=ne[n].RPKM[U].toFixed(2);document.getElementById(t[0].split("_svg")[0]+"_rpkm").innerHTML=o,e=o}else{let n=0;document.getElementById(t[0].split("_svg")[0]+"_rpkm").innerHTML=n,e=n}colour_part_by_id(n+"_svg",ne[n].svg_part,e,l)}}function parseIntArray(e){for(let t=0,n=e.length;t<n;t++)e[t]=parseInt(e[t],10);return e}let K=`${n}/cgi-bin/rnaSeqMapCoverage.cgi`,G="",V=0,j=1,q={},H="",z="simple",W=!1,Y=1,X=[];function rnaseq_images(e){changePublicData();if(H="",data={},h=1,Y=1,G="",X=[],get_input_values(),CreateFilteredeFPList(),g.length===k){j=1;for(let t=0;t<k;t++){let n=g[t][0]||"undefined",a=g[t][1]||"unknown";if("Google Drive"===ne[te[t]].bam_type){let e=ne[te[t]].drive_link,n=e.split("?usp=sharing");n=n[0].split("drive.google.com/drive/folders/"),G=n.length>1?n[1]:e}else if("Amazon AWS"===ne[te[t]].bam_type){let e=ne[te[t]].drive_link,n=e.split("amazonaws.com/");1===n.length&&(n=e.split("araport.cyverse-cdn.tacc.cloud/")),G=n.length>1?n[1]:e}data={status:e,numberofreads:ne[te[t]].numberofreads,hexcodecolour:ne[te[t]].hexColourCode,remoteDrive:G,bamType:ne[te[t]].bam_type,filename:ne[te[t]].filenameIn,tissue:n,record:a,locus:o,variant:1,start:c,end:m,yscale:s,cachedDatapoints:Se,struct:u,dumpMethod:z},$.ajax({method:"POST",url:K,data:data,dataType:"json",failure:function(){$("#failure").show()},success:function(e){let t=99;k>0&&(t=parseInt((k-1)/k*100)),h++;let n=new Date;if(b=n.getTime(),V=j/k*100,$("div#progress").width(V+"%"),V>t&&loadingScreen(!0),document.getElementById("progress_tooltip").innerHTML="Current progress is at "+V+"% done",document.getElementById("progress").title=V.toFixed(2)+"% ("+j+"/"+k+")",document.title="eFP-Seq Browser:",V<100&&(document.title+=` Loading ${V.toFixed(1)}% -`),document.title+=` ${o} - ${ae}`,e.status&&"success"===e.status&&e.record){let t=e.record||"unknown";if(X.includes(t)?(t=findUnusedRecordDisplayName(t,X),X.push(t)):X.push(t),X=[],ne[t].bp_length=parseFloat(e.end)-parseFloat(e.start),ne[t].bp_start=parseFloat(e.start),ne[t].bp_end=parseFloat(e.end),ne[t].MappedReads=e.reads_mapped_to_locus,q[t]=e.totalReadsMapped,ne[t].locusValue=e.locus,ne[t].r=e.r,ne[t].dataVisualization=e.rnaseqbase64,o!=e.locus)throw new Error(`ERROR: ${o}'s RNA-Seq API request returned with data for some other locus.`);let n=[];if(e.ss_y&&e.sum_y&&e.sum_xy&&e.sum_x&&e.ss_x&&e.end&&e.start){parseInt(e.ss_y);let t=parseInt(e.sum_y),o=parseInt(e.ss_y),l=parseIntArray(e.sum_xy.replace(/\[/g,"").replace(/\]/g,"").replace(/"/g,"").split(",")),a=parseIntArray(e.sum_x.replace(/\[/g,"").replace(/\]/g,"").replace(/"/g,"").split(",")),s=(parseIntArray(e.sum_xx.replace(/\[/g,"").replace(/\]/g,"").replace(/"/g,"").split(",")),parseIntArray(e.ss_x.replace(/\[/g,"").replace(/\]/g,"").replace(/"/g,"").split(",")),parseIntArray(e.ss_x.replace(/\[/g,"").replace(/\]/g,"").replace(/"/g,"").split(","))),i=parseInt(e.end)-parseInt(e.start),r=[];for(let e=0;e<l.length;e++)r.splice(e,0,l[e]-a[e]*t/i),n.splice(e,0,r[e]/Math.sqrt(s[e]*o))}else n=e.r;if(document.getElementById(t+"_rnaseq_img")&&e.rnaseqbase64?"None"!==e.rnaseqbase64&&e.rnaseqbase64.length>=3?(document.getElementById(t+"_rnaseq_img").src="data:image/png;base64,"+e.rnaseqbase64,j+=1):(document.getElementById(t+"_rnaseq_img").src="https://"+window.location.host+window.location.pathname+"cgi-bin/img/error.webp",console.error("Unable to create RNA-Seq map coverage data for: Locus - "+o+", SRA - "+t+", dataset - "+E)):(document.getElementById(`${t}_rnaseq_img`)&&(document.getElementById(`${t}_rnaseq_img`).src=`https://${window.location.host}${window.location.pathname}/cgi-bin/img/error.webp`),console.error("Unable to create RNA-Seq map coverage data for: Locus - "+o+", SRA - "+t+", dataset - "+E)),document.getElementById(t+"_rpb").innerHTML=parseFloat(n[0]).toFixed(2),ne[t].rpb=parseFloat(n[0]).toFixed(2),document.getElementById(t+"_rpkm").innerHTML=e["absolute-fpkm"],updateRPKMAbsoluteMax(e["absolute-fpkm"]),ne[t].RPKM=e["absolute-fpkm"],Y++,document.getElementById(t+"_totalReadsNum").innerHTML="Total reads = "+e.totalReadsMapped,W)if(H+='\t\telif (record == "'+e.record+'"):\n',"complex"==z){for(H+='\t\t\tdumpJSON(200, "'+e.locus+'", '+e.variant+", "+e.chromosome+", "+e.start+", "+e.end+', "'+e.record+'", "'+e.tissue+'", "'+e.rnaseqbase64+'", '+e.reads_mapped_to_locus+", "+e["absolute-fpkm"]+", ["+e.r+"], "+e.totalReadsMapped+", ["+e.exp_arr+"], [",n=0;n<e.ReadsMappedNucleotidePosition.length;n+=2)H+="["+e.ReadsMappedNucleotidePosition[n]+"]",n!=e.ReadsMappedNucleotidePosition.length-2&&(H+=", ");H+="], {";for(let t=0;t<e.expected_expr_in_variant.length;t++)H+='"'+Le[t].replace(o,"")+'": ',H+="["+e.expected_expr_in_variant[t]+"]",t!=e.expected_expr_in_variant.length-1&&(H+=", ");H+="})\n"}else H+='\t\t\tdumpJSON(200, "'+e.locus+'", '+e.variant+", "+e.chromosome+", "+e.start+", "+e.end+', "'+e.record+'", "'+e.tissue+'", "'+e.rnaseqbase64+'", '+e.reads_mapped_to_locus+", ["+e["absolute-fpkm"]+"], ["+e.r+"], "+e.totalReadsMapped+")\n";for(let o=0;o<k;o++)p&&p[o]&&p[o][0]&&p[o][0]==t+"_svg"&&(p[o].splice(3,1,e["absolute-fpkm"]),p[o].splice(5,1,n));colour_part_by_id(t+"_svg","Shapes",e["absolute-fpkm"][O],l)}else if(e.status&&"fail"===e.status){let t=e.record||"unknown";X.includes(t)?(t=findUnusedRecordDisplayName(t,X),X.push(t)):X.push(t),t&&document.getElementById(`${t}_rnaseq_img`)&&(document.getElementById(`${t}_rnaseq_img`).src=`https://${window.location.host}${window.location.pathname}/cgi-bin/img/error.webp`),j+=1,t&&document.getElementById(t+"_rpb")&&(document.getElementById(t+"_rpb").innerHTML=null,ne[t]||(ne[t]={}),ne[t].rpb=null),t&&document.getElementById(t+"_rpkm")&&(document.getElementById(t+"_rpkm").innerHTML=null,updateRPKMAbsoluteMax(null),ne[t].RPKM=null),Y++,t&&document.getElementById(t+"_totalReadsNum")&&e.totalReadsMapped&&(document.getElementById(t+"_totalReadsNum").innerHTML="Total reads = "+e.totalReadsMapped),t&&document.getElementById(t+"_row")&&document.getElementById(t+"_row").classList.add("mainEntriesError"),console.error("Unable to create RNA-Seq map coverage data for: Locus - "+o+", SRA - "+t+", dataset - "+E)}else console.log("Error!",e,data);Y==k&&(colour_svgs_now(),date_obj4=new Date,_=date_obj4.getTime(),document.getElementById("progress_tooltip").innerHTML=h+" / count_bam_entries_in_xml requests completed<br/>Load time ~= "+String(round(parseInt(_-A)/6e4))+" mins."),document.getElementById("landing").setAttribute("hidden","true"),$("#theTable").trigger("update"),responsiveRNAWidthResize(),toggleResponsiveTable()},error:function(e,t,n){generateToastNotification(`Error getting RNA-Seq map coverage for ${data.record} - ${n.message}`,"ERROR"),console.error("Error getting RNA-Seq map coverage!",e,t,n)}})}}}function findUnusedRecordDisplayName(e="unknown",t=te,n=0){if(Array.isArray(t)){let o=e+"_"+n;if(t.includes(o))findUnusedRecordDisplayName(e,t,n+1);else if(!t.includes(o))return o}else findUnusedRecordDisplayName(e,t=[])}function updateRPKMAbsoluteMax(e){let t=parseInt(document.getElementById("rpkm_scale_input").value);1e3===t&&(t=1);let n=parseInt(e);n>t&&(document.getElementById("rpkm_scale_input").value=n)}const J={"ath-10dayOldSeedling":{name:"10 Day Old Seedling",subunit:["all","root","shoot"]},"ath-15dayOldSeedling":{name:"15 Day Old Seedling",subunit:["all","root","shoot"]},"ath-etiolatedSeedling":{name:"Etiolated Seedling",subunit:["etiolatedseedling"]},"ath-Flower":{name:"Flower",subunit:["flower","receptacle"]},"ath-FlowerParts":{name:"Flower Parts",subunit:["all","petals","stamen","sepals","carpels"]},"ath-GerminatingSeed":{name:"Germinating Seed"},"ath-Internode":{name:"Internode"},"ath-leaf":{name:"Leaf",subunit:["leaf"]},"ath-LeafParts":{name:"Leaf Parts",subunit:["all","lamina","petiole","veins"]},"ath-Pollen":{name:"Pollen"},"ath-RootTip":{name:"Root Tip"},"ath-rosettePlusRoot":{name:"Rosette Plus Root",subunit:["all","shoot","root"]},"ath-Seed1-4":{name:"Seed 1-4"},"ath-Seed5-7":{name:"Seed 5-7"},"ath-Seed8+":{name:"Seed 8+"},"ath-SenescentLeaf":{name:"Senescent Leaf"},"ath-ShootApexInflorescense":{name:"Shoot Apex Inflorescense"},"ath-ShootApexVegetative-Transition":{name:"Shoot Apex Vegetative-Transition"},"ath-Silique1-5":{name:"Silique 1-5"},"ath-Silique6-10":{name:"Silique 6-10"},"ath-YoungLeaf1-4":{name:"Young Leaf 1-4"},"ath-EarlyBuddingFlower":{name:"Early Budding Flower",subunit:["all","shoot","buds"]},"ath-EarlyBuddingFlower":{name:"Early Budding Flower",subunit:["all","shoot","buds"]},"ath-FlowerBud":{name:"Flower Bud",subunit:["flowerBud"]},"ath-Stamen":{name:"Stamen",subunit:["all","anthers","filament"]},"ath-StigmaAndOvaries":{name:"Stigma And Ovaries",subunit:["all","Stigma_tissue","Ovary_tissue"]},"ath-WholeSilique":{name:"Whole Silique",subunit:["silique","all","seed"]},"ath-youngSeedling":{name:"Young Seedling",subunit:["all","root","hypocotyl","cotyledon"]},"ath-FlowerDevelopment1":{name:"Late Flower Development (1)",subunit:["flowerDevelopmentPart1"]},"ath-FlowerDevelopment2":{name:"Flower Development 2",subunit:["flowerDevelopmentPart2"]},"ath-FlowerDevelopment3":{name:"Flower Development 3",subunit:["flowerDevelopmentPart3"]},"ath-FlowerDevelopment4":{name:"Flower Development 4",subunit:["flowerDevelopmentPart4"]},"ath-FlowerDevelopment5":{name:"Flower Development 5",subunit:["flowerDevelopmentPart5"]},"ath-FlowerDevelopment6-8":{name:"Flower Development 6-8",subunit:["flowerDevelopmentPart6"]},"ath-FlowerDevelopment9-11":{name:"Flower Development 9-11",subunit:["flowerDevelopmentPart9"]},"ath-FlowerDevelopment12-14":{name:"Flower Development 12-14",subunit:["flowerDevelopmentPart12"]},"ath-FlowerDevelopment15-18":{name:"Flower Development 15-18",subunit:["flowerDevelopmentPart15"]},"ath-FlowerDevelopment19":{name:"Flower Development 19",subunit:["flowerDevelopmentPart19"]},"ath-Other":{name:"Other"}};function checkAgainstSVG(e,t,n=!1){let o=e.split(".")[0],l=n?J[o].name:t;return J[o]&&!n&&(J[o].subunit?J[o].subunit.includes(t)||(J[o].subunit_name?l=J[o].subunit_name:J[o].subunit[0]&&(l=J[o].subunit[0])):"all"!==t&&(l="all")),l}let Z,ee,te=[],ne={},oe={},le={},ae="data",se=1,ie='Show More Details <i class="material-icons detailsIcon">arrow_drop_down</i>',re='Show Less Details <i class="material-icons detailsIcon">arrow_drop_up</i>';function populate_table(e){$("#theTable").empty(),$("#compareTable").empty(),g=[],p=[],h=0,date_obj5=new Date,A=date_obj5.getTime(),y=-1,D=-1,w=null,v=null,te=[],ne={},oe={},le={},L=1,Q=1;let t='<img loading="lazy" src="data:image/png;base64,'+P+'" alt="RNA-Seq mapped image" style="float: right; margin-right: 10px;">',n='<thead><tr><th class="sortable colTitle" id="colTitle" onclick="ChangeColArrow(this.id)" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 250px;"><div class="row" id="colTitleRow"><div class="col-10">Title</div><div class="col-1"><img loading="lazy" class="sortingArrow" id="colTitleArrow" src="./cgi-bin/SVGs/arrowDefault.svg" alt="Sorting arrow"></div></div></th><th class="colRNA" id="colRNA" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; max-width: 576px;">RNA-Seq Coverage'+t+'</th><th class="sortable colrpb" id="colrpb" onclick="ChangeColArrow(this.id)" title="Point biserial correlation coefficient. Closer to 1 suggests a \'best\' match" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 75px;"><div class="row" id="colrpbRow"><div class="col-7" >r<sub>pb</sub></div><div class="col-1"><img loading="lazy" class="sortingArrow" id="colrpbArrow" src="./cgi-bin/SVGs/arrowDefault.svg" alt="Default sort arrow"></div></div></th><th class="coleFP" id="eFP_th" class="sortable" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 100px;">eFP (RPKM)</th><th class="sortable colRPKM" id="colRPKM" onclick="ChangeColArrow(this.id)" title="Reads Per Kilobase of transcript per Million mapped reads. Higher number suggest more mapped reads/expression" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 75px;"><div class="row" id="colRPKMRow"><div class="col-8">RPKM</div><div class="col-1"><img loading="lazy" class="sortingArrow" id="colRPKMArrow" src="./cgi-bin/SVGs/arrowDefault.svg" alt="Default sort arrow"></div></div></th><th class="sortable colDetails" id="colDetails" onclick="ChangeColArrow(this.id)" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 275px;"><div class="row" id="colDetailsRow"><div class="col-10">Details</div><div class="col-1"><img loading="lazy" class="sortingArrow" id="colDetailsArrow" src="./cgi-bin/SVGs/arrowDefault.svg" alt="Default sort arrow"></div></div></th><th class="sortable colCompare" id="colCompare" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; max-width: 30px;" hidden><div class="row" id="colCompareRow"></div></th></tr></thead><tbody id="data_table_body"></tbody>';$("#theTable").append(n);let a='<thead><tr><th id="compare_colTitle" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 250px;"><div class="row" id="compare_colTitleRow"><div class="col-xs-10">Title</div></div></th><th id="compare_colRNA" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; max-width: 576px;">RNA-Seq Coverage'+t+'</th><th id="compare_colrpb" title="Point biserial correlation coefficient. Closer to 1 suggests a \'best\' match" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 75px;"><div class="row" id="compare_colrpbRow"><div class="col-xs-6">r<sub>pb</sub></div></div></th><th id="compare_eFP_th" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 100px;">eFP (RPKM)</th><th id="compare_colRPKM" title="Reads Per Kilobase of transcript per Million mapped reads. Higher number suggest more mapped reads/expression" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 75px;"><div class="row" id="compare_colRPKMRow"><div class="col-xs-7">RPKM</div></div></th><th id="compare_colDetails" style="border: 1px solid #D3D3D3; background-color: #F0F0F0; width: 275px;"><div class="row" id="compare_colDetailsRow"><div class="col-xs-10">Details</div></div></th></tr></thead><tbody id="compare_table_body"></tbody>';$("#compareTable").append(a),$.ajax({url:E,dataType:"xml",success:function(t){$(t).find("files").each((function(){ae=$(this).attr("xmltitle")||"Uploaded dataset",ae=ae.trim(),0===ae.length&&(ae="Uploaded dataset"),document.getElementById("uploaded_dataset").innerHTML=ae})),document.title="eFP-Seq Browser:",V<100&&(document.title+=` Loading ${V.toFixed(1)}% -`),document.title+=` ${o} - ${ae}`,se=1,$(t).find("file").each((function(){let t=$(this).attr("record_number")||"unknown";if(te.includes(t)&&(t=findUnusedRecordDisplayName(t,te)),te.includes(t)){if(oe[t]){oe[t]+=1;let e=t+"("+oe[t]+")";te.push(e),ne[e]={}}}else oe[t]=1,te.push(t),ne[t]={};let n=$(this).attr("description");ne[t].title=n;let l=$(this).attr("info");ne[t].description=l;let a=$(this).attr("svgname");ne[t].svg=a;let s=$(this).attr("svg_subunit");s=checkAgainstSVG(a,s),ne[t].svg_part=s,le[checkAgainstSVG(a,s,!0)]?le[checkAgainstSVG(a,s,!0)].push(t):le[checkAgainstSVG(a,s,!0)]=[t];let i=$(this).attr("url");ne[t].url=i;let r=$(this).attr("publication_link");ne[t].publicationid=r;let d,c=$(this).attr("total_reads_mapped");null!=c&&""!=c||(c="0"),ne[t].numberofreads=c,d=null==$(this).attr("hex_colour")||""==$(this).attr("hex_colour")?"0x64cc65":$(this).attr("hex_colour"),ne[t].hexColourCode=d;let m=$(this).attr("filename");null!=m&&""!=m&&null!=m||(m="accepted_hits.bam"),ne[t].filenameIn=m;let u=$(this).attr("species");ne[t].species=u;let h=[];if(null==$(this).find("controls")[0].innerHTML)for(let e=1;e<$(this).find("controls")[0].childNodes.length;e+2)h.push($(this).find("controls")[0].childNodes[e].firstChild.textContent);else null!=$(this).find("controls")[0].innerHTML&&(h=$(this).find("controls")[0].innerHTML.replace(/<bam_exp>/g,"").replace(/<\/bam_exp>/g,",").replace(/\n/g," ").replace(/ /g,"").split(","));ne[t].controls=h;let f="";if(h.length>0)for(let e=h.length;e--;)"MEDIAN"!=h[e]?f+='<a href="https://www.ncbi.nlm.nih.gov/Traces/sra/?run='+h[e]+'"target="_blank" rel="noopener">'+h[e]+"</a> ":f+=h[e];ne[t].links=f;let b="";if(h.length>0)for(let e=0;e<h.length;e++)b+=h[e].toString(),e<h.length-2&&(b+=", ");ne[t].controlsString=b.trim();let _=$(this).attr("name");ne[t].name=_;let A=$(this).attr("svgname");A&&("ath-"===A.trim().substr(0,4)&&(A=A.slice(4,A.length).trim()),".svg"===A.trim().substr(A.length-4,4)&&(A=A.slice(0,A.length-4).trim())),g.push([A,t]),ne[t].tissue=A;let y=$(this).attr("bam_type");ne[t].bam_type=y;let D=$(this).attr("name");ne[t].drive_link=D;let w=$(this).attr("read_map_method");ne[t].read_map_method=w;let v="https://bioviz.org/bar.html?";v+="version=A_thaliana_Jun_2009&",v+="gene_id="+o+"&",v+="feature_url_0="+D+"&",v+="genome=A_thaliana_Jun_2009&",v+="annotation_set=Araport11&",v+="query_url="+D+"&",v+="server_url=bar";let E='<tr class="mainEntries" id="'+t+'_row">',B="<table id='table_dl'>\n\t<tbody>\n";B+="\t\t<caption>"+document.getElementById("xmlDatabase").value+"</caption>\n",E+='<td class="colTitle" style="width: 250px; font-size: 12px;" id="'+t+'_title">'+n+"</td>\n",E+=`\n\t\t\t\t\t<td class="colRNA" style="max-width: 576px;">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\t\tid="${t}_rnaseq_img"\n\t\t\t\t\t\t\talt="RNA-Seq mapped image for: ${t}"\n\t\t\t\t\t\t\tstyle="min-width:420px; max-width:576px; width:95%; height: auto;"\n\t\t\t\t\t\t\tclass="rnaseq_img responsiveRNAWidth"\n\t\t\t\t\t\t\tsrc="${T}"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<br/>\n\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\t\tid="${t}_gene_structure_img"\n\t\t\t\t\t\t\tstyle="max-width: 576px; width:100%; height: auto;"\n\t\t\t\t\t\t\tclass="gene_structure_img"\n\t\t\t\t\t\t\tsrc="${M}"\n\t\t\t\t\t\t\talt="Gene variant image for: ${t}"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\n\t\t\t\t`,E+='<td id="'+t+'_rpb" class="rpb_value colrpb" style="font-size: 12px; width: 50px; ">'+"-9999</td>",E+='<td class="coleFP" tag="svg_name" style="width:  75px;"><div id="'+t+'_svg" name="'+a.substring(0,a.length-4).slice(4)+'_tissue" tag='+s+'_subtissue" width="75" height="75" style="width: 75px; height: 75px; max-width: 75px; max-height: 75px;">'+document.getElementById(a.substring(4).replace(".svg","_svg")).innerHTML+'</div><div class="mdl-tooltip" for="'+t+'_svg">'+a.substring(4).replace(".svg","")+"</div></td>\n",E+='<td class="colRPKM" id="'+t+'_rpkm" style="font-size: 12px; width: 50px; ">-9999</td>',E+='<td class="colDetails" id="'+t+'_details" style="font-size: 12px;"><div id="'+t+'_description" name="'+l.trim()+'">'+truncateDescription(l)+"</div>","Amazon AWS"===y&&(E+='<div id="igbLink_'+t+'">Show: <a href="'+v+'" target="_blank" rel="noopener">Alignments in IGB</a></div>'),t.includes("unknown")&&!r||(E+='<div id="extraLinks_'+t+'">Go to: ',t.includes("unknown")||(E+='<a href="'+i+'" target="_blank" rel="noopener">NCBI SRA</a>'),t.includes("unknown")&&r&&(E+=" or "),r&&(E+='<a href="'+r+'" target="_blank" rel="noopener">PubMed</a>'),E+="</div>"),E+='<a id="clickForMoreDetails_'+se+'" name="'+t+'_description" onclick="clickDetailsTextChange(this.id)" href="javascript:(function(){$(\'#'+t+"').toggle();})()\">"+ie.trim()+"</a>",E+='<div id="'+t+'" class="moreDetails" style="display:none">',f&&(E+="Controls: "+f+"<br/>"),E+="Species: "+u+"<br>",E+='<div id="'+t+'_sra">SRA: '+t+"</div>",E+='<div id="'+t+'_totalReadsNum">Total reads = '+c+"</div>",null!=w&&w.length>0&&(E+='<div id="'+t+'_readMappedMethod">Read map method = '+w.trim()+"</div>"),E+='<a id="clickForMoreDetails_'+se+'_less" name="'+t+'_description" onclick="clickDetailsTextChange(this.id)" href="javascript:(function(){$(\'#'+t+"').toggle();})()\">"+re+"</a></div></td>\n",E+='<td class="colCompare" style="font-size: 12px; max-width: 30px;"><div id="'+t+'_compareVariant"><input type="checkbox" name="compareCheckbox" class="compareCheckbox" value="compareCheckbox" id="'+t+'_compareCheckbox" onclick="tableCheckbox(this.id);"></div></td>',E+="</tr>",se++,$("#theTable").append(E);let I=document.getElementsByClassName("fltrow")[0].childNodes[6];(I&&void 0===I.classList[0]||"undefined"===I.classList[0])&&(I.classList=["colCompare"],I.innerHTML='<input type="checkbox" name="compareCheckbox" class="compareCheckbox" value="compareCheckbox" id="allCheckbox" onclick="disableAllComparison();">'),p.push([t+"_svg",s,h,0,0,0,0]),!0===R?(setTimeout((function(){count_bam_num()}),200),setTimeout((function(){rnaseq_images(e)}),10)):rnaseq_images(e)})),$.tablesorter.addParser({id:"rpb_sorter",is:function(e){return!1},format:function(e){return NaN==e?-99999:null==e?-999999:Infinity==e?99999:-Infinity==e?-99999:parseFloat(e)},type:"numeric"}),$.tablesorter.addParser({id:"rpkm_sorter",is:function(e){return!1},format:function(e){return NaN==e?-99999:null==e?-999999:Infinity==e?99999:-Infinity==e?-99999:"Missing controls data"==e?-9999999:parseFloat(e)},type:"numeric"}),$("#theTable").tablesorter({headers:{0:{},1:{sorter:!1},2:{sorter:"rpb_sorter"},3:{},4:{sorter:"rpkm_sorter"},5:{}}}),$("#theTable").trigger("update")},error:function(e,t,n){generateToastNotification(`Error getting data from data file: ${n.message}`,"ERROR"),console.log("Error getting data from data file: "+n.message)}});new TableFilter("theTable",{base_path:"cgi-bin/core/packages/tableFilter/",columns_exact_match:[!1,!1,!1,!1,!1,!1],watermark:["Filter","Filter","Filter","Filter","Filter","Filter"],highlight_keywords:!1,no_results_message:!0,auto_filter:!0,auto_filter_delay:500,col_1:"none",popup_filters:!1,filters_row_index:1,alternate_rows:!1,msg_filter:"Filtering..."}).init(),change_rpkm_colour_scale(l);for(let o=0;o<Ke.length;o++){CheckElementWidth(Ke[o]+"Arrow",8)}createVariantDiv()}function createVariantDiv(){null==v&&document.getElementById("flt1_theTable")&&document.getElementById("flt1_theTable").parentElement&&(v=document.getElementById("flt1_theTable").parentElement),v.innerHTML="",$("#variant_select").ddslick("destroy"),document.getElementsByClassName("fltrow")[0].childNodes[1].innerHTML="",ee='<div id="variants_div">',ee+="</div>",document.getElementsByClassName("fltrow")[0].childNodes[1].innerHTML=ee,$("#variant_select").ddslick({width:"100%",onSelected:function(){gene_structure_radio_on_change()}})}function clickDetailsTextChange(e){if(null!=document.getElementById(e))if(document.getElementById(e).innerHTML==ie){document.getElementById(e).setAttribute("hidden",!0);const t=document.getElementById(document.getElementById(e).name);t.textContent=t.getAttribute("name")}else if(document.getElementById(e).innerHTML==re){const t=e.substring(0,e.length-5);document.getElementById(t).removeAttribute("hidden");const n=document.getElementById(document.getElementById(e).name);n.textContent=truncateDescription(n.getAttribute("name"))}}function truncateDescription(e){if(null!=e||null!=e)return e.length>30?e.substring(0,30)+"...":e}let de=0,ce=0,me=[],ue=[];function populate_efp_modal(e){toggleResponsiveTable(2),$("#efpModalTable").empty(),Z="",me=[];const t=document.getElementsByClassName("colTitle");for(let n=2;n<t.length;n++){let e=t[n].id.substring(0,t[n].id.length-6);"none"!=document.getElementById(e+"_row").style.display&&me.push(e)}de=me.length%11,ce=me.length,ue=[];for(let n=0;n<me.length;n++)isNaN(parseFloat(ne[me[n]].RPKM))||ue.push(parseFloat(ne[me[n]].RPKM));$("#efpModalTable").append(`\n\t\t\t<p class="eFP_thead">\n\t\t\t\tAGI-ID:\n\t\t\t\t\t<a href="https://www.arabidopsis.org/servlets/TairObject?type=locus&name=${o} target="_blank" rel="noopener">\n\t\t\t\t\t\t${o}\n\t\t\t\t\t</a>\n\t\t\t</p>\n\t\t`),"abs"===l?$("#efpModalTable").append(`\n\t\t\t\t<p class="eFP_thead">\n\t\t\t\t\teFP Colour Scale:\n\n\t\t\t\t\t<img\n\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\tsrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAPCAMAAAAlD5r/AAABQVBMVEX///8AAADcFDz/jAAAAP+m 3KYAfQD//wD//AD/+QD/9wD/9AD/8gD/7wD/7QD/6gD/6AD/5QD/4gD/4AD/3QD/2wD/2AD/1gD/ 0wD/0QD/zgD/zAD/yQD/xgD/xAD/wQD/vwD/vAD/ugD/twD/tQD/sgD/rwD/rQD/qgD/qAD/pQD/ owD/oAD/ngD/mwD/mQD/lgD/kwD/kQD/jgD/jAD/iQD/hwD/hAD/ggD/fwD/fAD/egD/dwD/dQD/ cgD/cAD/bQD/awD/aAD/ZgD/YwD/YAD/XgD/WwD/WQD/VgD/VAD/UQD/TwD/TAD/SQD/RwD/RAD/ QgD/PwD/PQD/OgD/OAD/NQD/MwD/MAD/LQD/KwD/KAD/JgD/IwD/IQD/HgD/HAD/GQD/FgD/FAD/ EQD/DwD/DAD/CgD/BwD/BQD/AgCkIVxRAAAAs0lEQVQ4jWNg5+Dk4ubh5eMXEBQSFhEVE5eQlJKW kZWTV1BUUlZRVVPX0NTS1tHV0zcwNDI2MTUzt7C0sraxtbN3cHRydnF1c/fw9PL28fXzDwgMCg4J DQuPiIyKjomNi09ITEpOSU1Lz8jMYhi1hERLGBmpbgljbBwjiiWMnFyMVLcECOhkCZBIZUzPYKSV JaDgYkxKZkxNY2SkmU8gljDCLaFdxDMmw4NrGOWTUUuItwQAG8496iMoCNwAAAAASUVORK5CYII="\n\t\t\t\t\t\tclass="colourScale"\n\t\t\t\t\t\talt="Absolute RPKM colour scale"\n\t\t\t\t\t/>\n\n\t\t\t\t\tMin: ${Math.min.apply(null,ue).toFixed(1)} RPKM,\n\n\t\t\t\t\tMax: ${Math.max.apply(null,ue).toFixed(1)} RPKM\n\t\t\t\t</p>\n\n\t\t\t\t<br />\n\n\t\t\t\t<table>\n\t\t\t\t\t<tbody class="eFP_tbody">\n\t\t\t\t</tbody>\n\t\t\t`):"rel"===l&&$("#efpModalTable").append(`\n\t\t\t\t<p class="eFP_thead">\n\t\t\t\t\teFP Colour Scale:\n\n\t\t\t\t\t<img\n\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\tsrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAPCAMAAAAlD5r/AAABQVBMVEX///8AAADcFDz/jAAAAP+m 3KYAfQAAAP8FBfkKCvQPD+8UFOoZGeUeHuAjI9soKNYtLdEzM8w4OMY9PcFCQrxHR7dMTLJRUa1W VqhbW6NgYJ5mZplra5NwcI51dYl6eoR/f3+EhHqJiXWOjnCTk2uZmWaenmCjo1uoqFatrVGysky3 t0e8vELBwT3GxjjMzDPR0S3W1ijb2yPg4B7l5Rnq6hTv7w/09Ar5+QX//wD/+wD/9gD/8QD/7AD/ 5wD/4gD/3QD/2AD/0wD/zQD/yAD/wwD/vgD/uQD/tAD/rwD/qgD/pQD/oAD/mgD/lQD/kAD/iwD/ hgD/gQD/fAD/dwD/cgD/bQD/ZwD/YgD/XQD/WAD/UwD/TgD/SQD/RAD/PwD/OgD/NAD/LwD/KgD/ JQD/IAD/GwD/FgD/EQD/DAD/BwBUljDTAAAA1klEQVQ4jWNg5+Dk4ubh5eMXEBQSFhEVE5eQlJKW kZWTV1BUUlZRVVPX0NTS1tHV0zcwNDI2MTUzt7C0sraxtbN3cHRydnF1c/fw9PL28fXzDwgMCg4J DQuPiIyKjomNi09ITEpOSU1Lz8jMYhi1hDRLGDi5GICWMBBvCSMjIUsYY+MYUS0BApJ8wmhlzUjI EiDAYgkD0CcMwgxUtQRIpDKmZzCiBBcDgwgDlSwBBRdjUjJjahojI2qcMAhT2RJGNEuAYUasJURH PGMyPLiGTz4ZtYQESwCEoDnh8dGTkQAAAABJRU5ErkJggg=="\n\t\t\t\t\t\tclass="colourScale"\n\t\t\t\t\t\talt="Relative RPKM colour scale"\n\t\t\t\t\t/>\n\n\t\t\t\t\tMin: ${Math.min.apply(null,ue).toFixed(1)},\n\n\t\t\t\t\tMax: ${Math.max.apply(null,ue).toFixed(1)}\n\t\t\t\t</p>\n\n\t\t\t\t<br />\n\n\t\t\t\t<table>\n\t\t\t\t\t<tbody>\n\t\t\t\t</tbody>\n\t\t\t`),$("#efpModalTable").append('<table id="eFPtable" class="table"></table>');for(let n=0;n<11*~~(me.length/11);n+=11)if("null"!=document.getElementById(me[n+10]).outerHTML){Z="<tr>";for(let e=0;e<11;e++)Z+=generateEFPTableItem(me[n+e],ne[me[n+e]].title);Z+="</tr>",$("#eFPtable").append(Z)}for(let n=0;n<12;n++)if(de===n){Z="<tr>";for(let e=de;e>0;e--)Z+=generateEFPTableItem(me[ce-e],ne[me[ce-e]].title);Z+="</tr>",$("#eFPtable").append(Z)}toggleResponsiveTable()}function generateEFPTableItem(e,t){return e&&t?`\n\t\t\t<td>\n\t\t\t\t<div\n\t\t\t\t\tclass="efp_table_tooltip"\n\t\t\t\t\tid="${e}_rep"\n\t\t\t\t\tonclick="ScrollToRNARow('${e}_row')"\n\t\t\t\t>\n\t\t\t\t\t${document.getElementById(e+"_svg").outerHTML}\n\t\t\t\t\t<span class="efp_table_tooltip_text">\n\t\t\t\t\t${e} - ${t}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t`:""}function change_rpkm_colour_scale(e){if(null===w&&document.getElementById("flt3_theTable")&&document.getElementById("flt3_theTable").parentElement&&(w=document.getElementById("flt3_theTable").parentElement),w&&w.innerHTML&&(w.innerHTML=""),"rel"==e){const e=document.createElement("img");e.src="data:image/png;base64,"+S,e.style="margin-top: 10px;",w&&w.appendChild(e)}else{const e=document.createElement("img");e.src="data:image/png;base64,"+F,e.style="margin-top: 10px;",e.alt="Absolute RPKM Scale",w&&w.appendChild(e)}const t=["colTitle","colRNA","colrpb","coleFP","colRPKM","colDetails"];let n=[];document.getElementsByClassName("fltrow")&&document.getElementsByClassName("fltrow")[0]&&(n=document.getElementsByClassName("fltrow")[0].getElementsByTagName("td"));for(let o=0;o<n.length;o++)n[o].style="border: 1px solid #D3D3D3",n[o].classList.add(t[o])}function locus_validation(){const e=document.getElementById("locus").value;9==e.length&&("A"==e[0]||"a"==e[0])&&("T"==e[1]||"t"==e[1])&&(e[2]>=1&&e[2]<=5||"C"==e[2]||"M"==e[2]||"c"==e[2]||"m"==e[2])&&("G"==e[3]||"g"==e[3])&&e[4]>=0&&e[4]<=9&&e[5]>=0&&e[5]<=9&&e[6]>=0&&e[6]<=9&&e[7]>=0&&e[7]<=9&&e[8]>=0&&e[8]<=9?$("#locus_button").removeAttr("disabled"):$("#locus_button").prop("disabled",!0)}function yscale_validation(){const e=document.getElementById("yscale_input").value;parseInt(e)>0||"Auto"==e||""==e?$("#locus_button").removeAttr("disabled"):$("#locus_button").prop("disabled",!0)}function rpkm_validation(){parseInt(document.getElementById("rpkm_scale_input").value)>0?$("#abs_scale_button").removeAttr("disabled"):$("#abs_scale_button").prop("disabled",!0)}let ge=!1;function reset_database_options(){$(".userAdded").remove(),x=I,be=!1,ge=!1}let pe,he=[],fe=!1,be=!1,_e=0,Ae={},ye=[];function get_user_XML_display(){const e=findAuthUser();""==users_email&&null==users_email&&null==users_email||users_email!==e?""!=users_email&&users_email!=e&&(signOut(),alert("Error occurred with your account, you have now been logged out. Please log back in")):$.ajax({url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/get_xml_list.php?user="+users_email,dataType:"json",failure:function(){console.log("ERROR! Something went wrong")},success:function(e){pe=void 0,Ae={},ye=[];let t=1,n=1;if(he=e,"fail"==he.status)console.log("Error code: "+he.error),fe=!1;else if("success"==he.status){if(fe=!0,_e!=he.files.length&&(reset_database_options(),be=!1),_e=he.files.length,he.files.length>0)for(let e=0;e<he.files.length;e++){pe=void 0,pe=he.files[e][1],pe&&0!==pe.trim()?.length&&"Uploaded dataset"!==pe?"Araport 11 RNA-seq data"==pe?(pe="Araport 11 RNA-seq data - Private version #"+n,n+=1):"Developmental transcriptome - Klepikova et al"==pe&&(pe="Developmental transcriptome - Klepikova et al - Private version #"+n,n+=1):(pe="Uploaded dataset - Unnamed dataset #"+t,t+=1),ye.push(pe);const o=he.files[e][0];Ae[pe]=o,e==he.files.length-1&&create_data_list(he.files.length)}setTimeout((function(){if(!be)for(let e=0;e<he.files.length;e++)x[ye[e]]=we[ye[e]],document.getElementById("xmlDatabase").innerHTML+=`\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tclass="userAdded"\n\t\t\t\t\t\t\t\t\t\ttag="private"\n\t\t\t\t\t\t\t\t\t\tvalue="${ye[e]}"\n\t\t\t\t\t\t\t\t\t\tid="${ye[e]}"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${ye[e]}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t`;be=!0}),1e3)}ge=!0},error:function(e,t,n){generateToastNotification(`Error getting user data: ${n.message}`,"ERROR"),console.log(`Error getting user data: ${n.message}`)}})}let De=[],we={};function create_data_list(e){if(De=[],we={},e>0)for(let t=0;t<e;t++)$.ajax({url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/get_xml.php?file="+Ae[ye[t]],dataType:"json",success:function(e){const t=e;De.push(t.data)},error:function(e,t,n){generateToastNotification(`Error getting user private datasets: ${n.message}`,"ERROR"),console.log(`Error getting user private datasets: ${n.message}`)}}),t===e-1&&setTimeout((function(){Ee=e,DatalistXHRCall(De)}),200)}let ve,Ee=0,Be=0;function DatalistXHRCall(e){if(Be!=Ee){const t=new XMLHttpRequest,n=e[Be];t.responseType="document",t.onreadystatechange=()=>{if(t.readyState===XMLHttpRequest.DONE&&200===t.status){let n=t.responseXML;if(n){let t=n.getElementsByTagName("files")[0].attributes.xmltitle.nodeValue;we[t]=e[Be],Be+=1,DatalistXHRCall(e)}}},t.open("GET",n),t.send()}}function validateEmail(e){return/\S+@\S+\.\S+/.test(e)}function findAuthUser(){return global_user&&global_user.email?global_user.email:""}function check_if_Google_login(){const e=findAuthUser();users_email&&e&&users_email===e?!1===ge&&(document.getElementById("private_dataset_header").style.display="block",get_user_XML_display()):(signOut(),remove_private_database())}function add_user_xml_by_upload(){get_user_XML_display(),setTimeout((function(){const e=findAuthUser();fe?fe&&(x[ae]?x[ae]&&(users_email===e?(be=!1,_e=0,$.ajax({url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/delete_xml.php?user="+users_email+"&file="+Ae[ae]}),$.ajax({method:"POST",url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/upload.php",data:{user:users_email,xml:B,title:ae}})):""!=users_email&&users_email!=e&&(signOut(),alert("Error occurred with your account, you have now been logged out. Please log back in"))):users_email===e?$.ajax({method:"POST",url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/upload.php",data:{user:users_email,xml:B,title:ae}}):""!=users_email&&users_email!=e&&(signOut(),alert("Error occurred with your account, you have now been logged out. Please log back in"))):users_email===e?$.ajax({method:"POST",url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/upload.php",data:{user:users_email,xml:B,title:ae}}):""!=users_email&&users_email!=e&&(signOut(),alert("Error occurred with your account, you have now been logged out. Please log back in")),get_user_XML_display()}),1e4)}let Ie=!1;function which_upload_option(){Ie=!0;const e=findAuthUser();""!=users_email&&users_email===e?document.getElementById("upload_modal").click():""!=users_email&&users_email!=e?(signOut(),alert("Error occurred with your account, you have now been logged out. Please log back in")):""==users_email&&document.getElementById("upload_logX").click()}let xe=[],Re=0;function delete_fill(){$("#delete_fill").empty(),$("#publicDatabaseDownload").empty(),xe=[];for(let t in I)I.hasOwnProperty(t)&&xe.push(t);let e=0;Re=xe.length+ye.length;for(let t=0;t<xe.length;t++)$("#publicDatabaseDownload").append(`\n\t\t\t\t<input\n\t\t\t\t\ttype="checkbox"\n\t\t\t\t\ttag="publicDataCheckbox"\n\t\t\t\t\tclass="publicDataCheckbox"\n\t\t\t\t\tonchange="disableDeletePublic()"\n\t\t\t\t\tid="deleteBox_${e}"\n\t\t\t\t\tvalue="${xe[t]}"\n\t\t\t\t>\n\t\t\t\t\t${xe[t]}\n\t\t\t\t</input>\n\t\t\t\t<br />\n\t\t\t`),e+=1;for(let t=0;t<ye.length;t++)$("#delete_fill").append(`\n\t\t\t\t<input\n\t\t\t\t\ttype="checkbox"\n\t\t\t\t\ttag="privateDataCheckbox"\n\t\t\t\t\tclass="privateDataCheckbox"\n\t\t\t\t\tonchange="disableDeletePublic()"\n\t\t\t\t\tid="deleteBox_${e}"\n\t\t\t\t\tvalue="${ye[t]}"\n\t\t\t\t>\n\t\t\t\t\t${ye[t]}\n\t\t\t\t</input>\n\t\t\t\t<br />\n\t\t\t`),e+=1}let ke=!1;function disableDeletePublic(){for(let e=0;e<xe.length;e++){if(document.getElementById("deleteBox_"+e).checked&&"publicDataCheckbox"==document.getElementById("deleteBox_"+e).className){ke||(document.getElementById("deleteXML_button").classList.add("disabled"),ke=!0);break}ke&&(document.getElementById("deleteXML_button").classList.remove("disabled"),ke=!1)}}function CheckIfSelectedXML(){const e=findAuthUser();for(let t=0;t<ye.length;t++){const n="deleteBox_"+(t+2);if(document.getElementById(n).checked&&users_email===e)return!0}if(1)return!1}function delete_selectedXML(){const e=findAuthUser();for(let t=0;t<ye.length;t++){const n="deleteBox_"+(t+2);document.getElementById(n)&&document.getElementById(n).checked&&users_email===e&&$.ajax({url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/delete_xml.php?user="+users_email+"&file="+Ae[document.getElementById(n).value]})}ge=!1}function confirm_deleteUser(){const e=findAuthUser();""!=users_email&&users_email===e&&$("#logoutModal").is(":visible")&&delete_allXMLs(e)}function delete_allXMLs(e){const t=findAuthUser();if(e===t){for(let e=0;e<ye.length;e++){const n="deleteBox_"+(e+2);users_email===t&&$.ajax({url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/delete_xml.php?user="+users_email+"&file="+Ae[document.getElementById(n).value]})}delete_user(),ge=!1}}function delete_user(){const e=findAuthUser();""!=users_email&&users_email===e&&$.ajax({url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/delete_user.php?user="+users_email}),signOut()}let Te="nope",Me="nope";function showWarning_index(e){1===e?ke||("nope"==Te?(document.getElementById("warning_index_xml").className="warning_index",Te="yes"):"yes"==Te&&hideWarning_index(e)):2===e&&("nope"==Me?(document.getElementById("warning_index_account").className="warning_index",Me="yes"):"yes"==Me&&hideWarning_index(e))}function hideWarning_index(e){1===e?(document.getElementById("warning_index_xml").className="warning_nope_index",Te="nope"):2===e&&(document.getElementById("warning_index_account").className="warning_nope_index",Me="nope")}function manage_DownloadXML(){const e=ye.length+2;for(let t=0;t<e;t++){const e="deleteBox_"+t;document.getElementById(e).checked&&($("#downloadXML").attr("href",x[document.getElementById(e).value]).attr("download",document.getElementById(e).value+".xml"),document.getElementById("downloadXML_button").click())}}const Ce="\t\t<tr>\n\t\t\t<th>Title*</th>\n\t\t\t<th>Description*</th>\n\t\t\t<th>Record Number *</th>\n\t\t\t<th>RNA-Seq Data/BAM file repository link*</th>\n\t\t\t<th>Repository type*</th>\n\t\t\t<th>BAM Filename*</th>\n\t\t\t<th>Publication Link</th>\n\t\t\t<th>SRA/NCBI Link</th>\n\t\t\t<th>Total Reads Mapped*</th>\n\t\t\t<th>Read Map Method</th>\n\t\t\t<th>Species*</th>\n\t\t\t<th>Tissue*</th>\n\t\t\t<th>Tissue subunit*</th>\n\t\t\t<th>Controls</th>\n\t\t\t<th>Replicate Controls</th>\n\t\t</tr>\n";function fill_tableCSV(){$("#XMLtoCSVtable").empty();for(let e=0;e<Re;e++){const t="deleteBox_"+e;$.ajax({url:x[document.getElementById(t).value],dataType:"xml",failure:function(){console.log("Failed at opening XML for conversion into a CSV file. Please contact an admin")},success:function(e){let t;$(e).find("files").each((function(){t=$(this).attr("xmltitle"),""!=t&&"Uploaded dataset"!=t||(t="Uploaded dataset"),t=t.split(" ").join("_")}));const n=$(e).find("file");let o="";o+="<table id='"+t+"'>\n\t<tbody>\n",o+="\t\t<caption>"+t+"</caption>\n",o+=Ce,n.each((function(){o+="\t\t<tr>\n";const e=$(this).attr("description");o+="\t\t\t<td>"+e+"</td>\n";const t=$(this).attr("info");o+="\t\t\t<td>"+t+"</td>\n";const n=$(this).attr("record_number");o+="\t\t\t<td>"+n+"</td>\n";const l=$(this).attr("name");o+="\t\t\t<td>"+l+"</td>\n";const a=$(this).attr("bam_type");o+="\t\t\t<td>"+a+"</td>\n";let s=$(this).attr("filename");null!=s&&"undefined"!==s&&".bam"!==s||(s="accepted_hits.bam"),o+="\t\t\t<td>"+s+"</td>\n";const i=$(this).attr("publication_link");o+="\t\t\t<td>"+i+"</td>\n";const r=$(this).attr("url");o+="\t\t\t<td>"+r+"</td>\n";let d=$(this).attr("total_reads_mapped");null!=d&&""!=d||(d="0"),o+="\t\t\t<td>"+d+"</td>\n";const c=$(this).attr("read_map_method");o+="\t\t\t<td>"+c+"</td>\n";let m=$(this).attr("species");null!=m&&""!=m||(m="Arabidopsis thaliana"),o+="\t\t\t<td>"+m+"</td>\n";const u=$(this).attr("svgname");o+="\t\t\t<td>"+u+"</td>\n";const g=$(this).attr("svg_subunit");o+="\t\t\t<td>"+g+"</td>\n";let p="";if($(this).find("controls")[0].innerHTML)for(let o=1;o<$(this).find("controls")[0].childNodes.length;o+=2)$(this).find("controls")[0].childNodes[o].firstChild&&(p+=$(this).find("controls")[0].childNodes[o].firstChild.textContent,o<$(this).find("controls")[0].childNodes.length-2&&(p+=", "));o+="\t\t\t<td>"+p+"</td>\n";let h="";if($(this).find("groupwith")[0].innerHTML)for(let o=1;o<$(this).find("groupwith")[0].childNodes.length;o+=2)$(this).find("groupwith")[0].childNodes[o].firstChild&&(h+=$(this).find("groupwith")[0].childNodes[o].firstChild.textContent,o<$(this).find("groupwith")[0].childNodes.length-2&&(h+=", "));o+="\t\t\t<td>"+h+"</td>\n",o+="\t\t</tr>\n"})),o+="\t</tbody>\n</table>",document.getElementById("XMLtoCSVtable").innerHTML+=o},error:function(e,t,n){generateToastNotification(`Error filling data table: ${n.message}`,"ERROR"),console.log(`Error filling data table: ${n.message}`)}})}}function download_XMLtableCSV(){for(let e=0;e<Re;e++){const t="deleteBox_"+e;if(document.getElementById(t).checked){const e=document.getElementById(t).value.split(" ").join("_");$("#"+e).tableToCSV()}}}const Fe="\t\t<tr>\n\t\t\t<th>Title</th>\n\t\t\t<th>Record Number</th>\n\t\t\t<th>Tissue</th>\n\t\t\t<th>Tissue subunit</th>\n\t\t\t<th>Locus</th>\n\t\t\t<th>bp Length</th>\n\t\t\t<th>bp Start site</th>\n\t\t\t<th>bp End site</th>\n\t\t\t<th>Total number of reads</th>\n\t\t\t<th>Reads mapped to locus</th>\n\t\t\t<th>rpb</th>\n\t\t\t<th>RPKM</th>\n\t\t\t<th>Controls</th>\n\t\t</tr>\n";function download_mainTableCSV(){document.getElementById("download_icon").classList.add("progressLoading"),document.getElementById("bodyContainer").classList.add("progressLoading"),populate_efp_modal(1),$("#hiddenDownloadModal_table").empty();let e="<table id='downloadIndexTable'>\n\t<tbody>\n";e+="\t\t<caption>"+ae.split(" ").join("_")+"</caption>\n",e+=Fe;for(const t of me)e+="\t\t<tr>\n",e+="\t\t\t<td>"+ne[t].title+"</td>\n",e+="\t\t\t<td>"+t+"</td>\n",e+="\t\t\t<td>"+ne[t].svg.substr(4,ne[t].svg.length-8)+"</td>\n",e+="\t\t\t<td>"+ne[t].svg_part+"</td>\n",e+="\t\t\t<td>"+ne[t].locusValue+"</td>\n",e+="\t\t\t<td>"+String(ne[t].bp_length)+"</td>\n",e+="\t\t\t<td>"+String(ne[t].bp_start)+"</td>\n",e+="\t\t\t<td>"+String(ne[t].bp_end)+"</td>\n",e+="\t\t\t<td>"+ne[t].numberofreads+"</td>\n",e+="\t\t\t<td>"+String(ne[t].MappedReads)+"</td>\n",e+="\t\t\t<td>"+ne[t].rpb+"</td>\n",e+="\t\t\t<td>"+String(ne[t].RPKM[O].toFixed(2))+"</td>\n",e+="\t\t\t<td>"+String(ne[t].controlsString)+"</td>\n",e+="\t\t</tr>\n";e+="\t</tbody>\n</table>",document.getElementById("hiddenDownloadModal_table").innerHTML+=e,$("#hiddenDownloadModal_table").tableToCSV(),document.getElementById("download_icon").classList.remove("progressLoading"),document.getElementById("bodyContainer").classList.remove("progressLoading")}let Se=!0;function changePublicData(e=!1){Se=!e&&!Ie&&(1==document.getElementById("xmlDatabase").selectedIndex||2==document.getElementById("xmlDatabase").selectedIndex)}let Pe=!0;function checkPreload(){if(get_input_values(),verifyLoci(o)){loadingScreen(!1),V=0,document.title=`eFP-Seq Browser: Loading 0% - ${o}`,document.getElementById("progress").title="0%",$("div#progress").width(V+"%");for(const e in I){if(E===I[e]){Se=!0;break}Se=!1}Se&&"AT2G24270"==o&&"simple"==z&&!W?(variants_radio_options(1),Pe=!0):(update_all_images(0),Pe=!1)}else console.error(`The following locus is not valid: ${o}`)}function verifyLoci(e){if("string"==typeof e){const t=new RegExp("^[A][T][MC0-9][G][0-9]{5}[.][0-9]{1,2}$|^[A][T][MC0-9][G][0-9]{5}$","i");return e.trim().match(t)}return!1}let Ne,Le=[];function getGFF(e){Le=[],$.ajax({url:`https://bar.utoronto.ca/webservices/bar_araport/gene_structure_by_locus.php?locus=${e}`,dataType:"json",crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*"},failure:function(){console.log("Getting GFFs (getGFF) information failed to retrieve locus information from Araport11")},success:function(e){if(Ne=e,Ne.wasSuccessful){let e=Ne.features[0].subfeatures;for(let t=0;t<e.length;t++)null!=e[t].uniqueID?Le.push(e[t].uniqueID):Le.push("Error retrieving unique ID/GFF")}else"fail"==Ne.status?console.log("Error: Cannot find GFF ID's with parse output. Please contact admin"):"false"==Ne.wasSuccessful&&(null!=Ne.error?console.log("Error: Cannot find GFF ID's due to following error: "+Ne.error+". Please contact admin"):console.log("Error: Cannot find GFF ID's with parse output. Please contact admin"))},error:function(e,t,n){generateToastNotification(`Error getting GFFs (getGFF) information failed to retrieve locus information from Araport11: ${n.message}`,"ERROR"),console.log(`Error getting GFFs (getGFF) information failed to retrieve locus information from Araport11: ${n.message}`)}})}function addGFF(){if(document.getElementsByClassName("dd-option").length>0)for(let e=0;e<Le.length;e++)document.getElementsByClassName("dd-option")[e]&&document.getElementsByClassName("dd-option")[e].setAttribute("title",Le[e])}function hiddenGoogleSignin(){const e=document.getElementsByClassName("abcRioButtonLightBlue");for(let t=0;t<e.length;t++)e[t]&&e[t].setAttribute("id","loginClick"+t)}function remove_private_database(){ge=!1,document.getElementById("private_dataset_header").style.display="none";const e=document.getElementsByClassName("userAdded");for(let t=0;t<e.length;t++)$("#xmlDatabase option:last").remove();_e=0}function correctAGIIDInput(){if(document.getElementById("locus")&&document.getElementById("locus").value&&document.getElementById("locus").value.trim().length>0){const e=document.getElementById("locus").value.trim().split("/");e[0]?document.getElementById("locus").value=e[0].toUpperCase().trim():document.getElementById("locus").value=document.getElementById("locus").value.trim(),locus_validation()}}function returnBackToTop(){document.getElementById("main_content").scrollTop=0}function toggleOptionsTable(){"false"===document.getElementById("tableToggle").getAttribute("aria-expanded")?(document.getElementById("tableToggle").setAttribute("aria-expanded",!0),document.getElementById("filterDropdown").classList.add("show")):(document.getElementById("tableToggle").setAttribute("aria-expanded",!1),document.getElementById("filterDropdown").classList.remove("show"))}function toggleTableOptionsView(){document.getElementById("tableFilter-tab").classList.value.includes("active")?(document.getElementById("tableFilter-tab").classList.remove("active"),document.getElementById("eFPFilter-tab").classList.add("active"),document.getElementById("tableFilter").classList.remove("show","active"),document.getElementById("eFPFilter").classList.add("show","active")):(document.getElementById("tableFilter-tab").classList.add("active"),document.getElementById("eFPFilter-tab").classList.remove("active"),document.getElementById("tableFilter").classList.add("show","active"),document.getElementById("eFPFilter").classList.remove("show","active"))}let $e=1;function downloadDiv(e){html2canvas(document.getElementById(e)).then((e=>{$("#appendCanvas").empty(),e.id="downloadDivNum_"+$e,document.getElementById("appendCanvas").appendChild(e),document.getElementById("downloadDivNum_"+$e).style.width="100%",$("#DownloadImageModal").modal("toggle"),$e++}))}function displayNavBAR(e=!1){const t=$("#navbar_menu").is(":visible")||e;document.getElementById("navbar_menu").style.display=t?"none":"block",document.getElementById("main_content").className=t?"col-sm-12":"col-sm-9",document.getElementById("openMenu").style.display=t?"block":"none",document.getElementById("theTable")&&(t?document.getElementById("theTable").classList.add("RNATable"):document.getElementById("theTable").classList.remove("RNATable"))}function adjustFooterSize(){const e=document.getElementById("navbar_menu");e&&(document.getElementById("nm_footer").style.width=e.offsetWidth+"px",e.scrollHeight==e.clientHeight?document.getElementById("nm_footer").classList.contains("navbar_menu_footer_overflow_abs")||(document.getElementById("nm_footer").classList.remove("navbar_menu_footer_overflow_sticky"),document.getElementById("nm_footer").classList.add("navbar_menu_footer_overflow_abs")):e.scrollHeight>e.clientHeight&&(document.getElementById("nm_footer").classList.contains("navbar_menu_footer_overflow_sticky")||(document.getElementById("nm_footer").classList.remove("navbar_menu_footer_overflow_abs"),document.getElementById("nm_footer").classList.add("navbar_menu_footer_overflow_sticky"))))}function adjustTableOptionsDropdownSize(){document.getElementById("filterDropdown").style.left=(document.body.offsetWidth-2*document.getElementById("tableToggle").offsetWidth-document.getElementById("filterDropdown").offsetWidth).toString()+"px"}function adjustSubmissionIFrameSize(){const e=.7*window.innerHeight;document.getElementById("submissioniframe").height=e+"px"}let Qe=!1;function toggleTableCol(e,t){const n=document.getElementsByClassName(e);if(t)for(const o of n)o&&o.removeAttribute("hidden");else if(!t)for(const o of n)o&&o.setAttribute("hidden",!0)}let Ue=!1;function responsiveRNAWidthResize(){const e=document.getElementsByClassName("responsiveRNAWidth");if(window.innerWidth<=575){for(let t=0;t<e.length;t++)e[t].style.minWidth=.93*window.innerWidth+"px";Ue=!0}else if(window.innerWidth>575&&Ue)for(let t=0;t<e.length;t++)e[t].style.minWidth="420px"}function toggleResponsiveTableOptions(e,t,n,o,l,a,s){toggleTableCol("colTitle",e),document.getElementById("toggleTitle").checked=e,toggleTableCol("colRNA",t),document.getElementById("toggleRNA").checked=t,toggleTableCol("colrpb",n),document.getElementById("togglerpb").checked=n,toggleTableCol("coleFP",o),document.getElementById("toggleeFP").checked=o,toggleTableCol("colRPKM",l),document.getElementById("toggleRPKM").checked=l,toggleTableCol("colDetails",a),document.getElementById("toggleDetails").checked=a,toggleTableCol("colCompare",s),document.getElementById("toggleCompare").checked=s,RememberToggleOptions(e,t,n,o,l,a,s)}function determineResponsiveTable(){document.body.offsetWidth<=576?(toggleResponsiveTable(2),displayNavBAR(!0)):toggleResponsiveTable(0)}function toggleResponsiveTable(e=0){"none"!=document.getElementById("tableToggle").style.display&&(1==e||window.innerWidth<=575&&!Qe?toggleResponsiveTableOptions(!1,!0,!1,!1,!1,!1,!1):2==e||window.innerWidth>=1100&&!Qe?toggleResponsiveTableOptions(!0,!0,!0,!0,!0,!0,!1):3==e||window.innerWidth<830&&!Qe?toggleResponsiveTableOptions(!0,!0,!1,!1,!1,!1,!1):4==e||window.innerWidth<900&&!Qe?toggleResponsiveTableOptions(!0,!0,!0,!1,!1,!1,!1):5==e||window.innerWidth<990&&!Qe?toggleResponsiveTableOptions(!0,!0,!0,!1,!0,!1,!1):(6==e||window.innerWidth<1100&&!Qe)&&toggleResponsiveTableOptions(!0,!0,!0,!0,!0,!1,!1))}let Oe=[!0,!0,!0,!0,!0,!0,!1];function RememberToggleOptions(e=!0,t=!0,n=!0,o=!0,l=!0,a=!0,s=!1){Oe=[e,t,n,o,l,a,s]}const Ke=["colTitle","colrpb","colRPKM","colDetails"];function ResizeArrowRow(){for(const e of Ke){const t=e+"Row";document.getElementById(t).style.width=document.getElementById(t).parentNode.offsetWidth-2+"px";CheckElementWidth(e+"Arrow",8)}}function CheckElementWidth(e,t){document.getElementById(e).offsetWidth<t&&(document.getElementById(e).style.width=t+"px")}function ChangeColArrow(e){setTimeout((function(){const t=e+"Arrow";document.getElementById(e).classList.contains("headerSortDown")?document.getElementById(t).src="./cgi-bin/SVGs/arrowSortDown.svg":document.getElementById(e).classList.contains("headerSortUp")&&(document.getElementById(t).src="./cgi-bin/SVGs/arrowSortUp.svg");for(const e of Ke){CheckElementWidth(e+"Arrow",8)}}),100)}function ScrollToRNARow(e){document.getElementById("closemodal_efPOverview").click(),$("#main_content").animate({scrollTop:$("#"+e).offset().top},"slow"),document.getElementById(e)&&(document.getElementById(e).className+=" scrollToRow",setTimeout((function(){document.getElementById(e).className+=" scrollToRowRemove"}),2e3),setTimeout((function(){document.getElementById(e).classList.remove("scrollToRow"),document.getElementById(e).classList.remove("scrollToRowRemove")}),4050))}function IfPressEnter(e,t){13!=e.which&&13!=e.keyCode||$("#"+t).click()}let Ge,Ve=!1;function DetectBrowser(){if(!1===Ve){const e={"Microsoft+Edge":{Contain:["Edge"]},Opera:{Contain:["OPR","Opera"]},Firefox:{Contain:["Firefox"],NContain:["Seamonkey"]},Seamonkey:{Contain:["Seamonkey"]},Chrome:{Contain:["Chrome"],NContain:["Chromium"]},Chromium:{Contain:["Chromium"]},"Internet+Explorer":{Contain:["MSIE"]},Safari:{Contain:["Safari"],NContain:["Chromium","Chrome"]}};let t,n;e?t=Object.keys(e):logError("Unable retrieve userAgentParser");let o=!0;for(const l of t)for(let t=0;t<e[l].Contain.length;t++)if(o&&-1!==navigator.userAgent.indexOf(e[element].Contain[t])){if(!e[element].NContain){n=element,o=!1;break}{const t=e[element].NContain.length;let l=0;if(e[element].NContain.forEach((e=>{-1!==navigator.userAgent.indexOf(e)&&l++})),l!=t){n=element,o=!1;break}}}if(n){$("#notChrome").empty();const e=' or through the following <a href="https://www.google.com/search?q=manage+cookies+in+'+n+'" target="_blank" rel="noopener">Google search results</a>';$("#notChrome").append(e)}Ve=!0}}function CreateFilteredeFPList(){if($("#filtereFPList").empty(),le){const e=Object.keys(le);for(const t of e){let e='<li class="form-check">';e+='<input class="form-check-input" type="checkbox" id="'+t.replace(" ","_")+'" onclick="ToggleFilteredeFP(this.id, this.checked);" style="margin: 6px 5px 0;" value="toggleeFP" checked>',e+='<p class="form-check-label" for="toggleTitle" style="padding-left: 20px; font-weight: 10;">'+t+"</p>",e+="</li>",$("#filtereFPList").append(e)}}else logError("Unable to use tissueSRADic")}function ToggleFilteredeFP(e,t){const n=e.replace("_"," "),o=le[n];if(!0===t)for(let l=0;l<o.length;l++)document.getElementById(o[l]+"_row")&&document.getElementById(o[l]+"_row").removeAttribute("hidden");else if(!1===t)for(let l=0;l<o.length;l++)document.getElementById(o[l]+"_row")&&document.getElementById(o[l]+"_row").setAttribute("hidden",!0)}function LoadSubmittedData(){emptyLanding(),V=0,document.title=`eFP-Seq Browser: Loading 0% - ${o}`,loadingScreen(!1),setTimeout((function(){count_bam_num(),disableAllComparison()}),200),update_all_images(0)}function generateShareLink(e=!1){let t="https://"+window.location.host+window.location.pathname;t+="?locus="+o+"&dataset="+E,Ge=t,e&&window.history.pushState&&window.history.pushState({},"Title",window.location.pathname+"?locus="+o+"&dataset="+E),document.getElementById("shareLinkTextArea").textContent=Ge}const je={};function readShareLink(){const e=window.location.search.substr(1);let t=!1,n=!1;if(""!=e){const l=e.split("&");for(const e of l){const o=e.split("=");if(o.length>1)if("locus"===o[0].split("%20").join(" ").trim()){const n=e.substring(6).split("%20").join(" ").trim();je.locus=n,document.getElementById("locus").value=n,t=!0}else if("dataset"===o[0].split("%20").join(" ").trim()){const t=e.substring(8).split("%20").join(" ").trim();je.dataset=t,E=t,n=!0}}t&&n?(emptyLanding(),V=0,document.title=`eFP-Seq Browser: Loading 0% - ${o}`,ne={},oe={},R=!1,setTimeout((function(){count_bam_num(),disableAllComparison(),checkPreload()}),200),toggleResponsiveTable(0)):displayError(t&&!1===n?"ERROR IN SHARE LINK! Missing dataset":!1===t&&n?"ERROR IN SHARE LINK! Missing locus":"ERROR IN SHARE LINK! Missing locus and dataset")}}function copyToClipboard(){""!==document.getElementById("shareLinkTextArea").trim()&&(document.getElementById("shareLinkTextArea").select(),document.execCommand("copy"))}let qe=[];function tableCheckbox(e,t=!1){const n=e.split("_")[0];if(t)disableAllComparison();else if(!1===t&&document.getElementById(e)&&document.getElementById(e).checked){qe.push(n);const t={};for(let e=0;e<Le.length;e++){let o='<tr class="compareDataRow" id="'+n+"_compareRow"+e+'">';parseInt(e)===parseInt(O)?o+='<td style="width: 250px; font-size: 12px;" id="'+n+"_compareTitle"+e+'">'+document.getElementById(n+"_title").innerHTML+" ... ("+Le[e]+")</td>\n":o+='<td style="width: 250px; font-size: 12px;" id="'+n+"_compareTitle"+e+'">^^^ ... ('+Le[e]+")</td>\n",o+='<td style="max-width: 576px;"><img loading="lazy" id="'+n+"_rnaseq_img"+e+'" alt="RNA-Seq mapped image for:'+n+'" style="min-width:420px; max-width:576px; width:95%; height: auto;" src="" /><br/><img loading="lazy" id="'+n+"_gene_structure_img"+e+'" style="max-width: 576px; width:100%; height: auto;" src="" alt="Gene variant image for:'+n+'"/></td>\n',o+='<td id="'+n+"_rpb"+e+'" style="font-size: 12px; width: 50px; ">'+ne[n].r[e].toFixed(2)+"</td>",o+='<td tag="svg_name" style="width:  75px;"><div id="'+n+"_svg"+e+'" name="'+ne[n].svg.substr(4).replace(".","_")+'_tissue" tag='+ne[n].svg_part+'_subtissue" width="75" height="75" style="width: 75px; height: 75px; max-width: 75px; max-height: 75px;">'+document.getElementById(ne[n].svg.substr(4).replace(".svg","_svg")).innerHTML+'</div><div class="mdl-tooltip" for="'+n+"_svg"+e+'">'+ne[n].svg.substring(4).replace(".svg","")+"</div></td>\n",o+='<td id="'+n+"_rpkm"+e+'" style="font-size: 12px; width: 50px; ">'+ne[n].RPKM[e].toFixed(2)+"</td>",parseInt(e)===parseInt(O)?o+='<td style="width: 250px; font-size: 12px;" id="'+n+"_compareTitle"+e+'"><div id="'+n+'_descriptionCompare" name="'+document.getElementById(n+"_description").getAttribute("name")+'">'+document.getElementById(n+"_description").innerHTML+'</div><div id="igbLinkCompare_'+n+'">'+document.getElementById("igbLink_"+n).innerHTML+'</div><div id="extraLinksCompare_'+n+'">'+document.getElementById("extraLinks_"+n).innerHTML+"</div></td>\n":o+='<td style="width: 250px; font-size: 12px;" id="'+n+"_compareTitle"+e+'">^^^</td>\n',o+="</tr>",t[e]=n+"_compareRow"+e,document.getElementById("compareTable").innerHTML+=o,document.getElementById(n+"_rnaseq_img"+e)&&document.getElementById(n+"_rnaseq_img"+e).setAttribute("src",document.getElementById(n+"_rnaseq_img").src),document.getElementById(n+"_gene_structure_img"+e)&&document.getElementById(n+"_gene_structure_img"+e).setAttribute("src",document.getElementsByClassName("dd-option-image")[e].src),ne[n].RPKM&&ne[n].RPKM[e]&&colour_part_by_id(n+"_svg"+e,ne[n].svg_part,ne[n].RPKM[e],l)}document.getElementById(e).checked=!0,document.getElementById("allCheckbox").checked=!0,"rel"!=l&&(document.getElementById("compareGeneVariants").disabled=!1)}else!1===t?(disableCompare(n),qe.splice(qe.indexOf(n),1),document.getElementById(e).checked=!1):!0===t&&disableAllComparison(),0===qe.length&&(document.getElementById("compareGeneVariants").disabled=!0)}function disableCompare(e){for(let t=0;t<Le.length;t++)null!=document.getElementById(e+"_compareRow"+t)&&document.getElementById(e+"_compareRow"+t).remove()}function disableAllComparison(){if(document.getElementById("allCheckbox")){let e=document.getElementsByClassName("compareDataRow");for(let o=e.length-1;o>=0;o--)document.getElementsByClassName("compareDataRow")[o].remove();qe=[],e=document.getElementsByClassName("compareCheckbox");for(let o=0;o<e.length;o++)document.getElementsByClassName("compareCheckbox")[o].checked=!1;document.getElementById("allCheckbox").checked=!1;const t=[],n=document.getElementsByClassName("mainEntries");for(let o=0;o<n.length;o++){const e=n[o].id;!1===t.includes(e)?t.push(e):document.getElementsByClassName("mainEntries")[o].remove()}document.getElementById("compareGeneVariants").disabled=!0}}function PnCDisappear(){document.getElementById("PrivacyAndCookies").setAttribute("hidden",!0),document.cookie="eSBAcceptedCookies=1; expires=Friday, December 31, 9999 at 7:00:00 AM; SameSite=Lax; Secure",document.cookie="eSBVersion="+e+"; expires=Friday, December 31, 9999 at 7:00:00 AM; SameSite=Lax; Secure"}function setUpCookies(){const t=document.cookie.split(";");let n,o;for(const e of t){const t=e.split("=");if(t[0]&&"eSBAcceptedCookies"===t[0].trim()&&(n=t[1].trim()),t[0]&&"eSBVersion"===t[0].trim()&&(o=t[1].trim()),n&&o)break}n&&"1"===n?document.getElementById("PrivacyAndCookies").setAttribute("hidden",!1):document.getElementById("PrivacyAndCookies").removeAttribute("hidden"),o&&o!==e&&(document.getElementById("PrivacyAndCookies").removeAttribute("hidden"),document.cookie="eSBAcceptedCookies=0; SameSite=Lax; Secure")}function appendVersionNumber(t){const n=`<br><br>The eFP-Seq Browser's current version number is: ${e}`;document.getElementById(t).innerHTML+=n}function displayVersionNumber(){appendVersionNumber("citationText"),appendVersionNumber("feedbackText")}let He=0;function generateToastNotification(e,t="Notification"){if(e){let n=`toast-${He}`;const o=`\n\t\t<div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-toast="${n}" style="background-color: rgba(255, 255, 255, 1);">\n\t\t\t<div class="toast-header">\n\t\t\t\t<img\n\t\t\t\t\tsrc="cgi-bin/img/BAR-logo.svg"\n\t\t\t\t\tclass="rounded me-2"\n\t\t\t\t\talt="BAR notification"\n\t\t\t\t\tstyle="width: 20px; height: 20px"\n\t\t\t\t/>\n\t\t\t\t<strong class="me-auto">${t}</strong>\n\t\t\t\t<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>\n\t\t\t</div>\n\t\t\t<div class="toast-body">${e}</div>\n\t\t</div>\n\t\t`;document.getElementById("toast-container").innerHTML+=o,$(`[data-toast="${n}"]`).toast({autohide:!1}),$(`[data-toast="${n}"]`).toast("show")}}function init(){document.getElementById("locus").value="AT2G24270",document.getElementById("xmlDatabase").value="Araport 11 RNA-seq data",locus_validation(),d=o,yscale_validation(),rpkm_validation(),adjustFooterSize(),displayVersionNumber(),adjustTableOptionsDropdownSize(),setUpCookies(),$("input[type=radio][name=radio_group]").change((function(){gene_structure_radio_on_change()})),$("#locus").keyup((function(){locus_validation()})),$("#yscale_input").keyup((function(){yscale_validation()})),$("#rpkm_scale_input").keyup((function(){rpkm_validation()})),document.getElementsByClassName("abcRioButtonLightBlue").length>0&&hiddenGoogleSignin(),getGFF(o),$("#locus").autocomplete({source:function(e,t){const n=e.term.split(/,\s*/).pop();$.ajax({type:"GET",url:"https://bar.utoronto.ca/webservices/eFP-Seq_Browser/idautocomplete.cgi?species=Arabidopsis_thaliana&term="+n,dataType:"json"}).done((function(e){e&&e.length>=7?t(e.slice(0,7)):t(e)}))},close:function(e,t){correctAGIIDInput()}});const e=document.getElementById("submissioniframe");e&&e.setAttribute("src",e.getAttribute("data-src")),adjustSubmissionIFrameSize(),readShareLink();document&&"bar.utoronto.ca"===document.location.host&&document.location.href&&document.querySelector('link[rel="canonical"]')&&document.querySelector('link[rel="canonical"]').setAttribute("href",document.location.href)}$(window).resize((function(){adjustFooterSize(),adjustSubmissionIFrameSize(),responsiveRNAWidthResize(),toggleResponsiveTable(),adjustTableOptionsDropdownSize(),setTimeout((function(){adjustFooterSize()}),10)})),adjustFooterSize(),window.addEventListener("load",(function(){init()}));